<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="stylesheet" href="/css/index.css"><title>Composition API | Eren的个人文档 - 记录优于记忆</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="modulepreload" href="/myBlog-vp/assets/app.fcb85f29.js"><link rel="modulepreload" href="/myBlog-vp/assets/composition.html.7503713a.js"><link rel="modulepreload" href="/myBlog-vp/assets/composition.html.5b2c6283.js">
    <link rel="stylesheet" href="/myBlog-vp/assets/style.0e2ef2fa.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/myBlog-vp/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt="Eren的个人文档 - 记录优于记忆"><span class="site-name can-hide">Eren的个人文档 - 记录优于记忆</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">HTML系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/html/start.html" class="sidebar-item" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">CSS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/css/start.html" class="sidebar-item" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/text.html" class="sidebar-item" aria-label="text  - font - 选择器"><!--[--><!--]--> text  - font - 选择器 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/jicheng.html" class="sidebar-item" aria-label="继承 - 层叠 - 元素类型"><!--[--><!--]--> 继承 - 层叠 - 元素类型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/hezi.html" class="sidebar-item" aria-label="盒子模型"><!--[--><!--]--> 盒子模型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/beijing.html" class="sidebar-item" aria-label="CSS设置背景"><!--[--><!--]--> CSS设置背景 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai.html" class="sidebar-item" aria-label="额外知识"><!--[--><!--]--> 额外知识 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/fudong.html" class="sidebar-item" aria-label="浮动"><!--[--><!--]--> 浮动 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/flex.html" class="sidebar-item" aria-label="flex 布局"><!--[--><!--]--> flex 布局 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai2.html" class="sidebar-item" aria-label="额外知识 (2)"><!--[--><!--]--> 额外知识 (2) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai3.html" class="sidebar-item" aria-label="额外知识 (3)"><!--[--><!--]--> 额外知识 (3) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/shipei.html" class="sidebar-item" aria-label="移动端适配"><!--[--><!--]--> 移动端适配 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Vue3系列 <span class="down arrow"></span></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue3/vue3.html" class="sidebar-item" aria-label="Vue2到Vue3的变化"><!--[--><!--]--> Vue2到Vue3的变化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/life.html" class="sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/communication.html" class="sidebar-item" aria-label="组件通信"><!--[--><!--]--> 组件通信 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/dynamic.html" class="sidebar-item" aria-label="动态组件"><!--[--><!--]--> 动态组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/async.html" class="sidebar-item" aria-label="异步组件"><!--[--><!--]--> 异步组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/v-model.html" class="sidebar-item" aria-label="v-model"><!--[--><!--]--> v-model <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/start.html" class="sidebar-item" aria-label="Vue 基础"><!--[--><!--]--> Vue 基础 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/options.html" class="sidebar-item" aria-label="Options API"><!--[--><!--]--> Options API <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/mixin.html" class="sidebar-item" aria-label="Mixin 和 extends"><!--[--><!--]--> Mixin 和 extends <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/directives.html" class="sidebar-item" aria-label="自定义指令"><!--[--><!--]--> 自定义指令 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/chajian.html" class="sidebar-item" aria-label="Vue 插件"><!--[--><!--]--> Vue 插件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Composition API"><!--[--><!--]--> Composition API <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#options-api-的弊端" class="router-link-active router-link-exact-active sidebar-item" aria-label="Options API 的弊端"><!--[--><!--]--> Options API 的弊端 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#setup-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="setup 函数"><!--[--><!--]--> setup 函数 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#setup-函数的参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="setup 函数的参数"><!--[--><!--]--> setup 函数的参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#setup-函数的返回值" class="router-link-active router-link-exact-active sidebar-item" aria-label="setup 函数的返回值"><!--[--><!--]--> setup 函数的返回值 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#核心" class="router-link-active router-link-exact-active sidebar-item" aria-label="核心"><!--[--><!--]--> 核心 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#reactive" class="router-link-active router-link-exact-active sidebar-item" aria-label="reactive"><!--[--><!--]--> reactive <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#ref" class="router-link-active router-link-exact-active sidebar-item" aria-label="ref"><!--[--><!--]--> ref <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#readonly" class="router-link-active router-link-exact-active sidebar-item" aria-label="readonly"><!--[--><!--]--> readonly <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#computed" class="router-link-active router-link-exact-active sidebar-item" aria-label="computed"><!--[--><!--]--> computed <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#侦听数据变化-watch-watcheffect" class="router-link-active router-link-exact-active sidebar-item" aria-label="侦听数据变化 watch watchEffect"><!--[--><!--]--> 侦听数据变化 watch watchEffect <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#watcheffect" class="router-link-active router-link-exact-active sidebar-item" aria-label="watchEffect"><!--[--><!--]--> watchEffect <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#watch" class="router-link-active router-link-exact-active sidebar-item" aria-label="watch"><!--[--><!--]--> watch <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#工具函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="工具函数"><!--[--><!--]--> 工具函数 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#torefs" class="router-link-active router-link-exact-active sidebar-item" aria-label="toRefs"><!--[--><!--]--> toRefs <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#toref" class="router-link-active router-link-exact-active sidebar-item" aria-label="toRef"><!--[--><!--]--> toRef <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#customref" class="router-link-active router-link-exact-active sidebar-item" aria-label="customRef"><!--[--><!--]--> customRef <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#composition-api-hook-练习" class="router-link-active router-link-exact-active sidebar-item" aria-label="Composition API Hook 练习"><!--[--><!--]--> Composition API Hook 练习 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#usecounter" class="router-link-active router-link-exact-active sidebar-item" aria-label="useCounter"><!--[--><!--]--> useCounter <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#usetitle" class="router-link-active router-link-exact-active sidebar-item" aria-label="useTitle"><!--[--><!--]--> useTitle <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#usescrollposition" class="router-link-active router-link-exact-active sidebar-item" aria-label="useScrollPosition"><!--[--><!--]--> useScrollPosition <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#usemouseposition" class="router-link-active router-link-exact-active sidebar-item" aria-label="useMousePosition"><!--[--><!--]--> useMousePosition <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#uselocalstorage" class="router-link-active router-link-exact-active sidebar-item" aria-label="useLocalStorage"><!--[--><!--]--> useLocalStorage <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue3/composition.html#hooks-目录结构" class="router-link-active router-link-exact-active sidebar-item" aria-label="hooks 目录结构"><!--[--><!--]--> hooks 目录结构 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a href="/myBlog-vp/vue3/h.html" class="sidebar-item" aria-label="h()函数"><!--[--><!--]--> h()函数 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/transition.html" class="sidebar-item" aria-label="Transition 过度动画"><!--[--><!--]--> Transition 过度动画 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue Router系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue-router/router.html" class="sidebar-item" aria-label="路由的原理"><!--[--><!--]--> 路由的原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-router/start.html" class="sidebar-item" aria-label="vue-router的基本使用"><!--[--><!--]--> vue-router的基本使用 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vuex系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vuex/start.html" class="sidebar-item" aria-label="Vuex"><!--[--><!--]--> Vuex <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Pinia系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/pinia/start.html" class="sidebar-item" aria-label="Pinia"><!--[--><!--]--> Pinia <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Webpack <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/gongcheng/start.html" class="sidebar-item" aria-label="webpack 入门"><!--[--><!--]--> webpack 入门 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/gongcheng/gaoji.html" class="sidebar-item" aria-label="高级概念"><!--[--><!--]--> 高级概念 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/gongcheng/fuxi.html" class="sidebar-item" aria-label="webpack 复习和总结"><!--[--><!--]--> webpack 复习和总结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">JS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/JS/xuanranyuanli.html" class="sidebar-item" aria-label="浏览器的渲染原理"><!--[--><!--]--> 浏览器的渲染原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/yunxing.html" class="sidebar-item" aria-label="js的运行原理"><!--[--><!--]--> js的运行原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/neicun.html" class="sidebar-item" aria-label="JS 的内存管理 , 闭包"><!--[--><!--]--> JS 的内存管理 , 闭包 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/this.html" class="sidebar-item" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/hanshu.html" class="sidebar-item" aria-label="函数式编程"><!--[--><!--]--> 函数式编程 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/yuanxing.html" class="sidebar-item" aria-label="面向对象"><!--[--><!--]--> 面向对象 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/jicheng.html" class="sidebar-item" aria-label="面向对象 - 继承"><!--[--><!--]--> 面向对象 - 继承 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/lei.html" class="sidebar-item" aria-label="面向对象 - 类"><!--[--><!--]--> 面向对象 - 类 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es6.html" class="sidebar-item" aria-label="ES6 (一)"><!--[--><!--]--> ES6 (一) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es62.html" class="sidebar-item" aria-label="ES6 (二)"><!--[--><!--]--> ES6 (二) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es789.html" class="sidebar-item" aria-label="ES6 +"><!--[--><!--]--> ES6 + <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/ppromise.html" class="sidebar-item" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/diedaiqi.html" class="sidebar-item" aria-label="Iterator - Generator"><!--[--><!--]--> Iterator - Generator <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/asyncawait.html" class="sidebar-item" aria-label="async - await"><!--[--><!--]--> async - await <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/eventloop.html" class="sidebar-item" aria-label="事件循环"><!--[--><!--]--> 事件循环 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/error.html" class="sidebar-item" aria-label="错误处理"><!--[--><!--]--> 错误处理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/mokuaihua.html" class="sidebar-item" aria-label="模块化"><!--[--><!--]--> 模块化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/json.html" class="sidebar-item" aria-label="JSON"><!--[--><!--]--> JSON <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/cunchu.html" class="sidebar-item" aria-label="数据存储"><!--[--><!--]--> 数据存储 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/dombom.html" class="sidebar-item" aria-label="BOM"><!--[--><!--]--> BOM <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/dom.html" class="sidebar-item" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/fangdoujieliu.html" class="sidebar-item" aria-label="手写防抖和节流"><!--[--><!--]--> 手写防抖和节流 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/digui.html" class="sidebar-item" aria-label="递归"><!--[--><!--]--> 递归 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/kuayu.html" class="sidebar-item" aria-label="跨域"><!--[--><!--]--> 跨域 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/shenkaobei.html" class="sidebar-item" aria-label="深拷贝 - 事件总线"><!--[--><!--]--> 深拷贝 - 事件总线 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/baoguanli.html" class="sidebar-item" aria-label="包管理工具"><!--[--><!--]--> 包管理工具 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/basic.html" class="sidebar-item" aria-label="基础知识"><!--[--><!--]--> 基础知识 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/array.html" class="sidebar-item" aria-label="数组"><!--[--><!--]--> 数组 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/reg2.html" class="sidebar-item" aria-label="正则表达式"><!--[--><!--]--> 正则表达式 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/http.html" class="sidebar-item" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">TS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/tsv2/start.html" class="sidebar-item" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/xijie.html" class="sidebar-item" aria-label="语法细节"><!--[--><!--]--> 语法细节 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/hanshu.html" class="sidebar-item" aria-label="函数类型"><!--[--><!--]--> 函数类型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/mianxiangduixiang.html" class="sidebar-item" aria-label="面向对象"><!--[--><!--]--> 面向对象 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">数据结构与算法 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/shujujiegou/start.html" class="sidebar-item" aria-label="栈, 队列, 链表"><!--[--><!--]--> 栈, 队列, 链表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start2.html" class="sidebar-item" aria-label="大O表示法, 哈希表"><!--[--><!--]--> 大O表示法, 哈希表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start3.html" class="sidebar-item" aria-label="树"><!--[--><!--]--> 树 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start4.html" class="sidebar-item" aria-label="图结构 (Graph)"><!--[--><!--]--> 图结构 (Graph) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">微信小程序系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/xiaochengxutixi/peizhi1.html" class="sidebar-item" aria-label="小程序的架构和配置"><!--[--><!--]--> 小程序的架构和配置 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/neizhizujian.html" class="sidebar-item" aria-label="小程序常见的内置组件"><!--[--><!--]--> 小程序常见的内置组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/yufa2.html" class="sidebar-item" aria-label="WXSS-WXML-WXS 语法"><!--[--><!--]--> WXSS-WXML-WXS 语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/shijian.html" class="sidebar-item" aria-label="小程序的事件处理"><!--[--><!--]--> 小程序的事件处理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/zujian.html" class="sidebar-item" aria-label="小程序的组件化开发"><!--[--><!--]--> 小程序的组件化开发 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/api.html" class="sidebar-item" aria-label="小程序系统 API 调用"><!--[--><!--]--> 小程序系统 API 调用 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Git系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/ggit/start.html" class="sidebar-item" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">uni-app <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/uni-app/start.html" class="sidebar-item" aria-label="创建项目"><!--[--><!--]--> 创建项目 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/uni-app/yufa.html" class="sidebar-item" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/uni-app/gouwujie.html" class="sidebar-item" aria-label="购物街项目"><!--[--><!--]--> 购物街项目 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">uni-app项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/banlu/start.html" class="sidebar-item" aria-label="项目的搭建"><!--[--><!--]--> 项目的搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/denglu.html" class="sidebar-item" aria-label="微信一键登录"><!--[--><!--]--> 微信一键登录 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/fenxiang.html" class="sidebar-item" aria-label="微信分享和收藏"><!--[--><!--]--> 微信分享和收藏 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/daohangshouwei.html" class="sidebar-item" aria-label="导航守卫"><!--[--><!--]--> 导航守卫 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/fenbao.html" class="sidebar-item" aria-label="分包"><!--[--><!--]--> 分包 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/guige.html" class="sidebar-item" aria-label="微信支付 + 收货地址"><!--[--><!--]--> 微信支付 + 收货地址 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3+TS 后台 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/banluhoutai/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3前台项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/front/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/zujian.html" class="sidebar-item" aria-label="构建自己的组件库 - 实现前端设计"><!--[--><!--]--> 构建自己的组件库 - 实现前端设计 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/header.html" class="sidebar-item" aria-label="通用业务 Header 处理方案"><!--[--><!--]--> 通用业务 Header 处理方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/xiangyingshi.html" class="sidebar-item" aria-label="前中台响应式处理方案"><!--[--><!--]--> 前中台响应式处理方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/zhuti.html" class="sidebar-item" aria-label="主题替换解决方案"><!--[--><!--]--> 主题替换解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/changliebiao.html" class="sidebar-item" aria-label="长列表组件 infinite + 图片懒加载(自定义指令)"><!--[--><!--]--> 长列表组件 infinite + 图片懒加载(自定义指令) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/liandong.html" class="sidebar-item" aria-label="多组件联动与高阶组件解决方案"><!--[--><!--]--> 多组件联动与高阶组件解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/xiazai.html" class="sidebar-item" aria-label="前台常见功能解决方案：下载+全屏+引导"><!--[--><!--]--> 前台常见功能解决方案：下载+全屏+引导 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/luyou.html" class="sidebar-item" aria-label="高阶路由过渡处理方案 - 浏览器堆栈主动介入"><!--[--><!--]--> 高阶路由过渡处理方案 - 浏览器堆栈主动介入 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/biaodan.html" class="sidebar-item" aria-label="人类行为验证处理方案 - 脱离UI组件库实现登录、注册+表单校验"><!--[--><!--]--> 人类行为验证处理方案 - 脱离UI组件库实现登录、注册+表单校验 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/tupian.html" class="sidebar-item" aria-label="图片裁剪与上传处理方案 - 基于阿里云 OSS 处理用户资料"><!--[--><!--]--> 图片裁剪与上传处理方案 - 基于阿里云 OSS 处理用户资料 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/yidongduan.html" class="sidebar-item" aria-label="移动端路由切换解决方案  - 虚拟任务栈让 H5 丝滑"><!--[--><!--]--> 移动端路由切换解决方案  - 虚拟任务栈让 H5 丝滑 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/fankui.html" class="sidebar-item" aria-label="用户反馈解决方案 -- 兔小巢构建反馈功能"><!--[--><!--]--> 用户反馈解决方案 -- 兔小巢构建反馈功能 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3旅途项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/hongyuan/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/service.html" class="sidebar-item" aria-label="网络请求封装"><!--[--><!--]--> 网络请求封装 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/start2.html" class="sidebar-item" aria-label="业务 (1)"><!--[--><!--]--> 业务 (1) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/yewu2.html" class="sidebar-item" aria-label="业务 (2)"><!--[--><!--]--> 业务 (2) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/yewu3.html" class="sidebar-item" aria-label="业务 (3)"><!--[--><!--]--> 业务 (3) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3后台管理项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue-admin/dajian.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/denglu.html" class="sidebar-item" aria-label="登录"><!--[--><!--]--> 登录 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/layout.html" class="sidebar-item" aria-label="项目架构之搭建 Layout架构 解决方案与实现"><!--[--><!--]--> 项目架构之搭建 Layout架构 解决方案与实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/tongyong.html" class="sidebar-item" aria-label="通用功能开发"><!--[--><!--]--> 通用功能开发 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/mokuai.html" class="sidebar-item" aria-label="vue3+ElementPlus 基础模块实现"><!--[--><!--]--> vue3+ElementPlus 基础模块实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/yonghu.html" class="sidebar-item" aria-label="excel 、zip 与前端结合解决方案 - 用户管理页面实现"><!--[--><!--]--> excel 、zip 与前端结合解决方案 - 用户管理页面实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/quanxian.html" class="sidebar-item" aria-label="权限受控解决方案"><!--[--><!--]--> 权限受控解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/dongtaibiaoge.html" class="sidebar-item" aria-label="动态表格渲染方案 - 文章排名业务实现"><!--[--><!--]--> 动态表格渲染方案 - 文章排名业务实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/fuwenben.html" class="sidebar-item" aria-label="富文本和 markdown 之 创建文章"><!--[--><!--]--> 富文本和 markdown 之 创建文章 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">日常记账项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/jizhang/dajian.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/jizhang/zujian.html" class="sidebar-item" aria-label="封装业务组件"><!--[--><!--]--> 封装业务组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/jizhang/yewu.html" class="sidebar-item" aria-label="业务功能"><!--[--><!--]--> 业务功能 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">基于Element Plus二次封装组件 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/fengzhuang/dajian.html" class="sidebar-item" aria-label="初级组件 上"><!--[--><!--]--> 初级组件 上 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/fengzhuang/chuxia.html" class="sidebar-item" aria-label="初级组件 - 下"><!--[--><!--]--> 初级组件 - 下 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/fengzhuang/zhongshang.html" class="sidebar-item" aria-label="中级组件"><!--[--><!--]--> 中级组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue2 UI <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue2ui/layout.html" class="sidebar-item" aria-label="Container 布局容器"><!--[--><!--]--> Container 布局容器 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue2ui/toast.html" class="sidebar-item" aria-label="Toast 轻提示"><!--[--><!--]--> Toast 轻提示 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue2ui/tabs.html" class="sidebar-item" aria-label="Tabs 标签页"><!--[--><!--]--> Tabs 标签页 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3 UI <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue3UI/start.html" class="sidebar-item" aria-label="使用 vite 搭建官网"><!--[--><!--]--> 使用 vite 搭建官网 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/switch.html" class="sidebar-item" aria-label="Switch 开关组件"><!--[--><!--]--> Switch 开关组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/dialog.html" class="sidebar-item" aria-label="Dialog 对话框组件"><!--[--><!--]--> Dialog 对话框组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/Tabs.html" class="sidebar-item" aria-label="Tabs 标签页组件"><!--[--><!--]--> Tabs 标签页组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/Tooltip.html" class="sidebar-item" aria-label="Tooltip 文字提示组件"><!--[--><!--]--> Tooltip 文字提示组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/build.html" class="sidebar-item" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">HRSaas项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/hrsass/start.html" class="sidebar-item" aria-label="项目搭建"><!--[--><!--]--> 项目搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/login.html" class="sidebar-item" aria-label="登录模块"><!--[--><!--]--> 登录模块 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/zhuye.html" class="sidebar-item" aria-label="主页模块"><!--[--><!--]--> 主页模块 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/luyou.html" class="sidebar-item" aria-label="路由和页面"><!--[--><!--]--> 路由和页面 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/zuzhijiagou.html" class="sidebar-item" aria-label="组织架构"><!--[--><!--]--> 组织架构 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/gongsi.html" class="sidebar-item" aria-label="公司和角色"><!--[--><!--]--> 公司和角色 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/yuangong.html" class="sidebar-item" aria-label="员工管理"><!--[--><!--]--> 员工管理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/tupian.html" class="sidebar-item" aria-label="图片上传预览及打印"><!--[--><!--]--> 图片上传预览及打印 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/quanxian.html" class="sidebar-item" aria-label="权限"><!--[--><!--]--> 权限 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/shouye.html" class="sidebar-item" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/tab.html" class="sidebar-item" aria-label="多语言tab页全屏主题"><!--[--><!--]--> 多语言tab页全屏主题 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/bushu.html" class="sidebar-item" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3 + TS 后台管理项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/cms/code.html" class="sidebar-item" aria-label="项目搭建规范"><!--[--><!--]--> 项目搭建规范 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/axioos.html" class="sidebar-item" aria-label="axios的基本使用"><!--[--><!--]--> axios的基本使用 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/axiosF.html" class="sidebar-item" aria-label="axios 封装"><!--[--><!--]--> axios 封装 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/1.html" class="sidebar-item" aria-label="项目 1"><!--[--><!--]--> 项目 1 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/2.html" class="sidebar-item" aria-label="项目 2"><!--[--><!--]--> 项目 2 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/3.html" class="sidebar-item" aria-label="项目 3"><!--[--><!--]--> 项目 3 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/4.html" class="sidebar-item" aria-label="项目 4"><!--[--><!--]--> 项目 4 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/5.html" class="sidebar-item" aria-label="项目 5"><!--[--><!--]--> 项目 5 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/6.html" class="sidebar-item" aria-label="项目 6"><!--[--><!--]--> 项目 6 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/7.html" class="sidebar-item" aria-label="/cms/7.md"><!--[--><!--]--> /cms/7.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">每日头条项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/toutiao/chushihua.html" class="sidebar-item" aria-label="项目初始化"><!--[--><!--]--> 项目初始化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/denglu.html" class="sidebar-item" aria-label="登录注册"><!--[--><!--]--> 登录注册 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/geren.html" class="sidebar-item" aria-label="个人中心"><!--[--><!--]--> 个人中心 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/wenzhang.html" class="sidebar-item" aria-label="首页 - 文章列表"><!--[--><!--]--> 首页 - 文章列表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/pindao.html" class="sidebar-item" aria-label="首页 - 频道编辑"><!--[--><!--]--> 首页 - 频道编辑 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/sousuo.html" class="sidebar-item" aria-label="文章搜索"><!--[--><!--]--> 文章搜索 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/xiangqing.html" class="sidebar-item" aria-label="文章详情"><!--[--><!--]--> 文章详情 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/pinglun.html" class="sidebar-item" aria-label="文章评论"><!--[--><!--]--> 文章评论 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/bianji.html" class="sidebar-item" aria-label="编辑资料"><!--[--><!--]--> 编辑资料 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="composition-api" tabindex="-1"><a class="header-anchor" href="#composition-api" aria-hidden="true">#</a> Composition API</h1><p><a href="https://staging-cn.vuejs.org/api/composition-api-setup.html#basic-usage" target="_blank" rel="noopener noreferrer">官网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="options-api-的弊端" tabindex="-1"><a class="header-anchor" href="#options-api-的弊端" aria-hidden="true">#</a> Options API 的弊端</h2><p><code>vue2</code> 中的开发形式被称为 <code>options API</code>, <code>options API</code> 存在</p><ul><li>方便</li><li>易学</li><li>清晰</li></ul><p>等一些特点，但是也存在着一些问题。</p><p>而其中最主要的一个问题就是：<strong>当你的组件变得越来越复杂时，组件的可读性会变得越来越差</strong></p><p><strong>定义数据与使用数据被分割在组件的各个位置，导致我们需要不断地翻滚页面来查看具体的业务逻辑！</strong></p><ol><li>OPtions API 的最大的特点就是在<strong>对应的属性</strong>中编写<strong>对应的功能模块</strong></li><li>比如<strong>data 定义数据</strong>, <strong>methods 中定义方法</strong>, <strong>computed 中定义计算属性</strong>, <strong>watch 中监听属性的改变</strong>, 也包括<strong>生命钩子函数</strong></li></ol><ul><li>但这种代码有一个很大的弊端</li></ul><ol><li>当我们<strong>实现某一个功能时</strong>, 这个功能<strong>对应的代码逻辑</strong>会被<strong>拆分到各个属性</strong>中</li><li>当组件<strong>变得更大、更复杂时</strong>, <strong>逻辑关注点的列表</strong>就会增长, 那么同一个功能的逻辑就会被拆分地很分散, 这些代码难以阅读和理解</li></ol><p>而 <code>Composition API</code> 所期望解决的就是这么一个问题</p><p>把定义数据与使用数据的逻辑放在一起进行处理，以达到<strong>更加易读，更加方便扩展的目的</strong>！</p><h2 id="setup-函数" tabindex="-1"><a class="header-anchor" href="#setup-函数" aria-hidden="true">#</a> setup 函数</h2><h3 id="setup-函数的参数" tabindex="-1"><a class="header-anchor" href="#setup-函数的参数" aria-hidden="true">#</a> setup 函数的参数</h3><p>有两个参数</p><ul><li>第一个参数: <strong>props</strong></li><li>第二个参数: <strong>context</strong></li></ul><p>跟之前一样, 在<strong>props 选项中定义</strong>并且<strong>在 template 中</strong>依然可以<strong>正常去使用 props 中的属性</strong>。如果我们在<strong>setup 函数中想要使用 props</strong>, 那么<strong>不可以通过 this 去获取</strong>, 因为 props 有直接<strong>作为参数传递到 setup 函数中</strong>, 所以可以<strong>直接通过参数</strong>来使用即可</p><p>另外一个参数是 context, 称之为 <strong>SetupContext</strong>里面<strong>包含三个属性</strong></p><ul><li>attrs : 所有非 props 的属性</li><li>slots : 父组件传递过来的插槽</li><li>emit : 当在组件内部需要发出事件时会用到 emit(因为不能访问跟 this, 所以不可以通过 this.$emit 发出事件)</li><li>可使用解构语法</li></ul><p><img src="/myBlog-vp/assets/setupContext.d5153361.png" alt="图片"></p><h3 id="setup-函数的返回值" tabindex="-1"><a class="header-anchor" href="#setup-函数的返回值" aria-hidden="true">#</a> setup 函数的返回值</h3><ul><li>setup 的返回值可以在<strong>模板 template 中被使用</strong></li><li>也就是说<strong>可以通过 setup 的返回值替代 data 选项</strong></li><li>甚至还可以<strong>返回一个执行函数</strong>来<strong>替代 methods 中定义的方法</strong></li><li>注意: setup 函数里的变量需要做<strong>响应式处理</strong></li></ul><h2 id="核心" tabindex="-1"><a class="header-anchor" href="#核心" aria-hidden="true">#</a> 核心</h2><h3 id="reactive" tabindex="-1"><a class="header-anchor" href="#reactive" aria-hidden="true">#</a> reactive</h3><p>如果想在 setup 中定义的数据变成响应式的特性, 可以<strong>使用 reactive 函数</strong>, <strong>要求传入对象或者数组类型</strong></p><p><img src="/myBlog-vp/assets/reactive.0f88f126.png" alt="图片"></p><h3 id="ref" tabindex="-1"><a class="header-anchor" href="#ref" aria-hidden="true">#</a> ref</h3><p>reactive API <strong>对传入的类型是有要求的</strong>, 它要求必须传入的是<strong>一个对象或者数组类型</strong>:</p><ul><li>如果传入一个<strong>基本类型, 如 string, number, boolean 会报一个警告</strong>; <img src="data:image/png;base64,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" alt="图片"></li></ul><p>这个时候可以用另外一个 API: <strong>ref API</strong></p><ul><li>ref 会返回一个<strong>可变的响应式对象</strong> , 该对象最为一个<strong>响应式引用</strong>维护着它内部的值</li><li>它内部的值<strong>在 ref 的<code>value</code>属性</strong>中被维护 <img src="/myBlog-vp/assets/ref.e193a3d1.png" alt="图片"></li></ul><p>注意事项:</p><ul><li>在<strong>模板中引入 ref 的值</strong>时, Vue 会<strong>自动帮我们进行解包操作</strong>, 所以<strong>不需要在模板中通过 ref.value 的方式来使用</strong></li><li>但是在 <strong>setup 函数内部</strong>, 他依然<strong>是 ref 引用</strong>, 所以对其进行操作时, 依然需要<strong>使用 ref.value 的形式</strong><img src="/myBlog-vp/assets/refTemplate.cf9fd507.png" alt="图片"></li></ul><h3 id="readonly" tabindex="-1"><a class="header-anchor" href="#readonly" aria-hidden="true">#</a> readonly</h3><p>通过<strong>reactive 或者 ref 可以获取到一个响应式对象</strong>, 但是某些情况下, <strong>传入给其他组件的响应式对象</strong>希望被使用<strong>但是不能被修改</strong>, 这个时候可以使用 readonly</p><p><strong>readonly 返回一个原值的只读代理</strong> , 接受一个对象(无论响应式或非响应式)或者一个 ref</p><p><img src="/myBlog-vp/assets/readonly.4158f219.png" alt="图片"></p><h3 id="computed" tabindex="-1"><a class="header-anchor" href="#computed" aria-hidden="true">#</a> computed</h3><p>computed 使用方法</p><ul><li><ol><li><strong>接受一个getter函数,</strong> 并<strong>为getter函数返回的值</strong>, <strong>返回一个 ref 对象</strong></li></ol></li></ul><p><img src="/myBlog-vp/assets/computed1.22c87c3f.png" alt="图片"></p><ul><li><ol start="2"><li><strong>接受一个具有 get 和 set 的对象</strong>, <strong>返回一个可变的(可读写的) ref 对象</strong></li></ol></li></ul><p><img src="/myBlog-vp/assets/computed2.82f0cd3d.png" alt="图片"></p><h3 id="侦听数据变化-watch-watcheffect" tabindex="-1"><a class="header-anchor" href="#侦听数据变化-watch-watcheffect" aria-hidden="true">#</a> 侦听数据变化 watch watchEffect</h3><p>在Options API中, 可以通过watch选项来侦听 data 或者 props 的数据变化, 当数据变化的时候执行某一些操作</p><p>在Composition API中 , 可以使用 watch 和 watchEffect 来完成响应式数据的侦听</p><ul><li>watchEffect 用于<strong>自动收集响应式数据的依赖</strong></li><li>watch <strong>需要手动指定侦听的数据源</strong></li></ul><h3 id="watcheffect" tabindex="-1"><a class="header-anchor" href="#watcheffect" aria-hidden="true">#</a> watchEffect</h3><ul><li>首先, <strong>watchEffect传入的函数会被立即执行一次</strong>, 并且在执行的过程中收集依赖</li><li>其次 , 只有收集的依赖发生变化时, watchEffect传入的函数才会立即执行</li></ul><p><img src="/myBlog-vp/assets/watchEffect.4a963b4d.png" alt="图片"></p><h4 id="watcheffect-停止侦听" tabindex="-1"><a class="header-anchor" href="#watcheffect-停止侦听" aria-hidden="true">#</a> watchEffect 停止侦听</h4><p>watchEffect 函数的返回值是一个用来停止该副作用的函数</p><p><img src="/myBlog-vp/assets/watchEffectStop.6e0d7bce.png" alt="图片"></p><h4 id="watcheffect-清除副作用" tabindex="-1"><a class="header-anchor" href="#watcheffect-清除副作用" aria-hidden="true">#</a> watchEffect 清除副作用</h4><p>什么是清除副作用?</p><ul><li>比如在开发中, 需要在侦听函数中执行网络请求, 但是在网络请求还没有达到的时候, 我们停止了侦听器, 或者侦听器侦听函数被再次调用</li><li>那么上一次的网络请求应该被取消掉, 这个时候就可以清除上一次的副作用</li></ul><p>在watchEffect 传入的函数被回调时, 其实可以获取到一个参数: <strong>onCleanup</strong></p><ul><li>当 <strong>副作用即将重新执行</strong> 或者 <strong>侦听器被停止</strong> 时会执行该函数传入的回调函数</li><li>可以在传入的回调函数中, 执行一些清除工作</li></ul><p><img src="/myBlog-vp/assets/onCleanup.2fbbb06b.png" alt="图片"> 取消计时器</p><p><img src="/myBlog-vp/assets/onCleanup2.bd4ef480.png" alt="图片"></p><h4 id="watcheffect-执行时机" tabindex="-1"><a class="header-anchor" href="#watcheffect-执行时机" aria-hidden="true">#</a> watchEffect 执行时机</h4><p>如果希望在副作用函数里获取到元素, 是否可行 ?? <img src="/myBlog-vp/assets/tRef.e55a242b.png" alt="图片"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWMAAAAzCAIAAADNWf71AAAACXBIWXMAABJ0AAASdAHeZh94AAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAXRSURBVHic7d3PT5p3HAfwT5feZVInbbbZB8ulGU0xYDKyNDSLbdolenClnoiyiU0vXkjRZolyqEDLoVysSkIsh0lVDpIUgyyTLAs7QHhWSXphLXFLFVQy/QvYAVB+iF+Z/ND0/TqZ7/f5Ps/D4Xn7+fA84TmXTqcJAOBInzT6BADgDEBSAAAbkgIA2JAUAMCGpAAANiQFALCdr/sRo06TL05ERAK5Zrjrs/0J3mX1ZCaaZEMPvxXV/cwAoJz6J4VUMyol2vJOOmOFE7I+vYwo4bdPxw5fCQCNgu4DANhOWFNseSedO0rNhaAztEdExN3Ra64TZUsDca6J2PJOOmOSgl4DAM6QKtQU8WXnjlI/NqofkjfFl+f5k+8RAE6ZKiSFQK7J1BGir8QC2tvcPPkuAeB0wfcUAMCGpAAAtlolhailifZSmUaEd2W/7wSAM6pmz1NcVymCTo/J6iESyDXd5PwtM/7nvHH57+w2YacxTMTdHuuT5j+RRcRPm3iiL7tH1bJanR8AVOAcfskGAJjwPQUAsCEpAIANSQEAbEgKAGBDUgAA2/m9PTzqAAAMuEsKAGzoPgCADUkBAGxICgBgQ1IAABuSAgDYkBQAwIakAAA2JAUAsCEpAIDtVCUF7xIaXeFyswm/1mgR2vwbJz/Q9iuthNMubB9n28SCVizhxBJOLJkoe26VCzstQucaEREl3TaL1ps8akujxYq3I0AjnaqkKG/DOyV8Rd9xlazhJyq8trcXBw+JD9E9x/tY/P38YCXHZloLxJtmbl1jbmY1WgIXOnqqemyAyjU6KTa8U+wyIeH/aUeZGu5qK506ugwpp+W+IxZ33GupdF3FEn6tccqdKB7e8AZNgvavWS9pDjuD3JBB31E6wyhDAKqtoUkRdlqkIYFvuOtS/ijvEhotwvxGQ9Tl0JT59yvriyp2bxddjfyEWMKJ1XYiuzrbOHDmbPUeMedG8sqH7cVBTizpfBSgwOPObK8x+KrkAi+W15hoF0tbGd4lnI5c7X7QW5wIyT9ie6M3Cj81Jd02S+aD7zcack3p2ozW3uE7V0Ozuf4FoObSDfLm2bi5+fnKh/yxyFzzweCbZ+PmgdeJ/PnQy5IleQuLNk5HnnBXnoQOP/rWwo+XB+a3jjFYdm+b8wMHI5En3JWBhbyloZfm5vEXi5uH7mqueXwub1eJxefm5nHzs0g6nU5/eP2icDad3lwZyM0WyiycK/MZAaqoITVFwq81Lr9V9KeKqgkiorZciXFNxdHSzvEKbFlfaqiD6vo/dvv3lVXd/GN59gQGn6pWvYFMXZF02yy3/+2Ijh1eEYSj6z2Km/LCwR5Fv15GRHSpo72HdteZ9QwRUWvvsMHHrReXVADV14ikCK9Elqq+U1HrVSKKB+t1zfzzV4Bm1Fyu++h8FMjN8Ku63fLrEv7JeNvDu63VOo9LF5qI9nQraEOgpmr2ZqAjyDWGFK1ZjbPCWEf0kLKicrxL6FnvUfSnqncFsnxxRUW6h/GR0lcXyfpSMgo7LVLju5mh4rJiI/JuiVM6qnMOSbdtVrfb5ht7IGdvDHASDftG85p+zOD7NCL9H3cuCm14p4Se3Zkhg6MoJj5vV5H9lwoeQ2i53E6BlV+PV5S0fHPr5oy67F1YucaQ6hbopoueg1j7OUTHuDl6HGtW46zu0zupsT7EBNReI2qKfXKNIeqdktr8rMpizWpcNmX/jkiNEaI2X+YK4V3SkMB36NXScn9iwqdUczNERKSbj4/IiPgJsdqe3SDQKX5M9IP7/Uj2PqR8xK2T9ColI0REKnPQfl9E24uDB52FWmInuvk06Pi+hUT3HEHSKiX7z3hkxw/I+lIX/drpKffFXGXBvzUJ2qOsm6P7NrxT0twbXZc8FpOHehT9jrutREm3bfltXWso+MjhdzTrJ+m2zcZvGPR41yqcPY1+8uojwq/qdttUiAk4k1BTAAAbagoAYENSAAAbkgIA2JAUAMD2H8oIwIf8+f29AAAAAElFTkSuQmCC" alt="图片"> 会发现打印结果打印了两次:</p><ul><li>这是因为setup函数在执行时会立即执行传入的副作用函数, 这个时候DOM还没有挂载 , 所以打印为 null</li><li>而当DOM挂载时 , 会给title的ref对象赋值新的值 , 副作用该函数会再次执行 , 打印出了对应的元素</li></ul><h4 id="调整-watcheffect-的执行时机" tabindex="-1"><a class="header-anchor" href="#调整-watcheffect-的执行时机" aria-hidden="true">#</a> 调整 watchEffect 的执行时机</h4><p>如果想要第一次的时候就打印对应的元素</p><ul><li>要改变副作用函数的执行时机</li><li>它的默认值是pre , 它会在元素挂载 或者更新之前执行</li><li>所以先会打印一个空, 当依赖的title 变化时, 就会再次执行一次, 打印出了元素</li></ul><p>可以设置副作用函数的调用时机 <img src="/myBlog-vp/assets/flushPost.6f5b0e8a.png" alt="图片"> flush 还接受 sync , 这将强制效果始终同步发生, 然而,这是低效的, 应该很少使用</p><h3 id="watch" tabindex="-1"><a class="header-anchor" href="#watch" aria-hidden="true">#</a> watch</h3><p>watch API 完全等同于组件watch选项的Property</p><ul><li>watch需要侦听特定的数据源 , 并在回调函数中执行副作用</li><li>默认情况下它是<strong>惰性</strong>的, 只有当被已侦听的源发生变化时才会执行回调</li></ul><p>与 watchEffect比较, watch允许我们:</p><ul><li>懒惰执行副作用(第一次不会执行)</li><li>更具体的说明当哪些状态发生变化时, 触发侦听器的执行</li><li>访问侦听器状态变化前后的值</li></ul><p><strong>第一个参数</strong>是数据<strong>源</strong></p><ul><li>一个getter函数，返回一个值</li><li>一个 ref</li><li>一个响应式对象</li><li>或是由以上类型的值组成的数组</li></ul><ol><li>侦听watch时传入<strong>一个getter函数</strong></li></ol><p><img src="/myBlog-vp/assets/watch1.64ab6b9f.png" alt="图片"> 2. 传入一个可响应式对象 : reactive对象/ref对象</p><ul><li><strong>情况一</strong>:reactive获取到的 newValue 和 oldValue 本身都是reactive对象</li></ul><p><img src="/myBlog-vp/assets/watch2.7646b529.png" alt="图片"> 如果希望 newValue和 oldValue 是一个个普通的对象 , 使用一个getter函数 , 并且对可响应式对象进行<strong>解构</strong><img src="/myBlog-vp/assets/watch3.e49a0371.png" alt="图片"> 如果是数组 <img src="/myBlog-vp/assets/watch6.683322e1.png" alt="图片"></p><ul><li><strong>情况二</strong>:ref对象获取的 newValue 和 oldValue 是<strong>value</strong>本身</li></ul><p><img src="/myBlog-vp/assets/watch4.89252f56.png" alt="图片"> 3. 以上类型的数组</p><p><img src="/myBlog-vp/assets/watch5.a8f14f6a.png" alt="图片"></p><h2 id="工具函数" tabindex="-1"><a class="header-anchor" href="#工具函数" aria-hidden="true">#</a> 工具函数</h2><p><strong>isProxy()</strong></p><ul><li>检查对象<strong>是否是由 reactive 或者 readonly 创建的 proxy</strong></li></ul><p><strong>isReactive()</strong></p><ul><li>检查对象<strong>是否是有 reactive 创建的响应式代理</strong></li><li>如果该代理是 readonly 建的 , 但是包裹了由 reactive 创建的另一个代理, 也会返回 true</li></ul><p><strong>isReadonly()</strong></p><ul><li>检查对象<strong>是否由 readonly 创建的只读代理</strong></li></ul><p><strong>toRow()</strong></p><ul><li>返回** reactive 和 readonly 代理的原始的对象**(<strong>不</strong>建议对原始对象的持久引用, 谨慎使用)</li></ul><p><strong>shallowReactive()</strong></p><ul><li>创建一个响应式代理, 他跟踪自身 property 的响应性, 但<strong>不执行嵌套对象的深层响应式转换</strong>(浅层响应式转换)</li></ul><p><strong>shallowReadonly</strong></p><ul><li>创建一个 proxy , 使其自身的 property 为只读, 但<strong>不执行嵌套对象的深度只读转换</strong>(深层还是可读, 可写的)</li></ul><h3 id="torefs" tabindex="-1"><a class="header-anchor" href="#torefs" aria-hidden="true">#</a> toRefs</h3><p>如果<strong>使用 ES6 的解构语法</strong>, 对<strong>reactive 返回的对象进行解构获取值</strong>, 那么<strong>数据不再是响应式的</strong>:</p><p><img src="/myBlog-vp/assets/toRefs.d716c2e1.png" alt="图片"></p><ul><li>Vue3 提供了一个 <strong>toRefs 的函数</strong>, 可以将<strong>reactive 返回的对象中的属性都转成 ref</strong></li><li>那么<strong>解构出来的 name 和 age 本身都是 ref</strong></li></ul><p><img src="/myBlog-vp/assets/toRefs2.6b553d82.png" alt="图片"></p><p>这种做法已经在<strong>state.name 和 ref.value</strong>之间建立了<strong>链接</strong> , <strong>任何一个修改都会引起另外一个的变化</strong></p><h3 id="toref" tabindex="-1"><a class="header-anchor" href="#toref" aria-hidden="true">#</a> toRef</h3><p>如果只希望转换一个<strong>reactive 对象中的属性为 ref</strong>, 那么<strong>可以用 toRef 的方法:</strong><br><img src="/myBlog-vp/assets/toRef.ae878bd2.png" alt="图片"></p><p><strong>unref</strong></p><p>如果想要<strong>获取一个 ref 引用中的 value</strong> , 那么可以用 unref 方法:</p><ul><li><strong>如果参数是一个 ref</strong> , 则<strong>返回内部值 ,否则返回参数本身</strong></li><li>这是<strong>val = isRef(val) ? val.value : val</strong> 的语法糖</li></ul><p><strong>isRef</strong></p><ul><li>判断值<strong>是否为 ref 对象</strong></li></ul><p><strong>shallowRef</strong></p><ul><li>创建<strong>一个浅层的 ref 对象</strong></li></ul><p><strong>triggerRef</strong></p><ul><li>手动触发和 shallowRef 相关联的副作用</li></ul><h3 id="customref" tabindex="-1"><a class="header-anchor" href="#customref" aria-hidden="true">#</a> customRef</h3><p>创建<strong>一个自定义的 ref</strong>, 并对<strong>其依赖项跟踪和更新触发进行显示控制:</strong></p><ul><li>需要<strong>一个工厂函数</strong>, 该<strong>函数接受 track 和 trigger 函数作为参数</strong></li><li>并且要返回<strong>一个带有 get 和 set 的函数</strong></li></ul><p>案例: 对<strong>双向绑定的属性进行 debounce 防抖的操作</strong></p><p>hook/userDebounceRef.js <img src="/myBlog-vp/assets/customRef.f13214aa.png" alt="图片"></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDebouncedRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./debouncedRef&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token function">useDebouncedRef</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="composition-api-hook-练习" tabindex="-1"><a class="header-anchor" href="#composition-api-hook-练习" aria-hidden="true">#</a> Composition API Hook 练习</h2><h3 id="usecounter" tabindex="-1"><a class="header-anchor" href="#usecounter" aria-hidden="true">#</a> useCounter</h3><p>对 counter 逻辑进行抽取</p><p><strong>hooks/useCounter.js</strong><img src="/myBlog-vp/assets/useCounter.9ad7f0c0.png" alt="图片"></p><p>组件内使用时: <img src="/myBlog-vp/assets/useCounter2.d67def67.png" alt="图片"></p><h3 id="usetitle" tabindex="-1"><a class="header-anchor" href="#usetitle" aria-hidden="true">#</a> useTitle</h3><p>编写一个可以改变页面 title 的hook</p><ul><li>函数返回ref对象, 利于改变值</li><li>使用watch侦听ref对象的变化, 执行 document.title = newValue</li></ul><p><img src="/myBlog-vp/assets/useTitle.93af73b6.png" alt="图片"></p><p>组件内使用时:</p><p><img src="/myBlog-vp/assets/useTitle2.5f0647a0.png" alt="图片"></p><h3 id="usescrollposition" tabindex="-1"><a class="header-anchor" href="#usescrollposition" aria-hidden="true">#</a> useScrollPosition</h3><p><img src="/myBlog-vp/assets/useScroll.83f69e88.png" alt="图片"></p><h3 id="usemouseposition" tabindex="-1"><a class="header-anchor" href="#usemouseposition" aria-hidden="true">#</a> useMousePosition</h3><p><img src="/myBlog-vp/assets/useMouse.4980a5ef.png" alt="图片"></p><h3 id="uselocalstorage" tabindex="-1"><a class="header-anchor" href="#uselocalstorage" aria-hidden="true">#</a> useLocalStorage</h3><p><img src="/myBlog-vp/assets/useStore.4f9a5ccf.png" alt="图片"></p><p>在组件内部使用时</p><p><img src="/myBlog-vp/assets/useStore2.9cb95e72.png" alt="图片"></p><h3 id="hooks-目录结构" tabindex="-1"><a class="header-anchor" href="#hooks-目录结构" aria-hidden="true">#</a> hooks 目录结构</h3><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>hooks
|-- index.js    入口文件
|-- useLocalStorage.js
|-- useMousePosition.js
|-- useScrollPosition.js
...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><!--]--></div><footer class="page-meta"><!----><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 932274204@qq.com">jgoriginal</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/myBlog-vp/vue3/chajian.html" class="" aria-label="Vue 插件"><!--[--><!--]--> Vue 插件 <!--[--><!--]--></a></span><span class="next"><a href="/myBlog-vp/vue3/h.html" class="" aria-label="h()函数"><!--[--><!--]--> h()函数 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/myBlog-vp/assets/app.fcb85f29.js" defer></script>
  </body>
</html>
