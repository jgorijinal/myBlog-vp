<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="stylesheet" href="/css/index.css"><title>微信支付 + 收货地址 | Eren的个人文档 - 记录优于记忆</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="modulepreload" href="/myBlog-vp/assets/app.fcb85f29.js"><link rel="modulepreload" href="/myBlog-vp/assets/guige.html.d8fe2b8d.js"><link rel="modulepreload" href="/myBlog-vp/assets/guige.html.2026093d.js">
    <link rel="stylesheet" href="/myBlog-vp/assets/style.0e2ef2fa.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/myBlog-vp/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt="Eren的个人文档 - 记录优于记忆"><span class="site-name can-hide">Eren的个人文档 - 记录优于记忆</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">HTML系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/html/start.html" class="sidebar-item" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">CSS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/css/start.html" class="sidebar-item" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/text.html" class="sidebar-item" aria-label="text  - font - 选择器"><!--[--><!--]--> text  - font - 选择器 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/jicheng.html" class="sidebar-item" aria-label="继承 - 层叠 - 元素类型"><!--[--><!--]--> 继承 - 层叠 - 元素类型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/hezi.html" class="sidebar-item" aria-label="盒子模型"><!--[--><!--]--> 盒子模型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/beijing.html" class="sidebar-item" aria-label="CSS设置背景"><!--[--><!--]--> CSS设置背景 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai.html" class="sidebar-item" aria-label="额外知识"><!--[--><!--]--> 额外知识 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/fudong.html" class="sidebar-item" aria-label="浮动"><!--[--><!--]--> 浮动 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/flex.html" class="sidebar-item" aria-label="flex 布局"><!--[--><!--]--> flex 布局 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai2.html" class="sidebar-item" aria-label="额外知识 (2)"><!--[--><!--]--> 额外知识 (2) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai3.html" class="sidebar-item" aria-label="额外知识 (3)"><!--[--><!--]--> 额外知识 (3) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/shipei.html" class="sidebar-item" aria-label="移动端适配"><!--[--><!--]--> 移动端适配 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue3/vue3.html" class="sidebar-item" aria-label="Vue2到Vue3的变化"><!--[--><!--]--> Vue2到Vue3的变化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/life.html" class="sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/communication.html" class="sidebar-item" aria-label="组件通信"><!--[--><!--]--> 组件通信 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/dynamic.html" class="sidebar-item" aria-label="动态组件"><!--[--><!--]--> 动态组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/async.html" class="sidebar-item" aria-label="异步组件"><!--[--><!--]--> 异步组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/v-model.html" class="sidebar-item" aria-label="v-model"><!--[--><!--]--> v-model <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/start.html" class="sidebar-item" aria-label="Vue 基础"><!--[--><!--]--> Vue 基础 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/options.html" class="sidebar-item" aria-label="Options API"><!--[--><!--]--> Options API <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/mixin.html" class="sidebar-item" aria-label="Mixin 和 extends"><!--[--><!--]--> Mixin 和 extends <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/directives.html" class="sidebar-item" aria-label="自定义指令"><!--[--><!--]--> 自定义指令 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/chajian.html" class="sidebar-item" aria-label="Vue 插件"><!--[--><!--]--> Vue 插件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/composition.html" class="sidebar-item" aria-label="Composition API"><!--[--><!--]--> Composition API <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/h.html" class="sidebar-item" aria-label="h()函数"><!--[--><!--]--> h()函数 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/transition.html" class="sidebar-item" aria-label="Transition 过度动画"><!--[--><!--]--> Transition 过度动画 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue Router系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue-router/router.html" class="sidebar-item" aria-label="路由的原理"><!--[--><!--]--> 路由的原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-router/start.html" class="sidebar-item" aria-label="vue-router的基本使用"><!--[--><!--]--> vue-router的基本使用 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vuex系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vuex/start.html" class="sidebar-item" aria-label="Vuex"><!--[--><!--]--> Vuex <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Pinia系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/pinia/start.html" class="sidebar-item" aria-label="Pinia"><!--[--><!--]--> Pinia <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Webpack <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/gongcheng/start.html" class="sidebar-item" aria-label="webpack 入门"><!--[--><!--]--> webpack 入门 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/gongcheng/gaoji.html" class="sidebar-item" aria-label="高级概念"><!--[--><!--]--> 高级概念 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/gongcheng/fuxi.html" class="sidebar-item" aria-label="webpack 复习和总结"><!--[--><!--]--> webpack 复习和总结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">JS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/JS/xuanranyuanli.html" class="sidebar-item" aria-label="浏览器的渲染原理"><!--[--><!--]--> 浏览器的渲染原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/yunxing.html" class="sidebar-item" aria-label="js的运行原理"><!--[--><!--]--> js的运行原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/neicun.html" class="sidebar-item" aria-label="JS 的内存管理 , 闭包"><!--[--><!--]--> JS 的内存管理 , 闭包 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/this.html" class="sidebar-item" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/hanshu.html" class="sidebar-item" aria-label="函数式编程"><!--[--><!--]--> 函数式编程 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/yuanxing.html" class="sidebar-item" aria-label="面向对象"><!--[--><!--]--> 面向对象 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/jicheng.html" class="sidebar-item" aria-label="面向对象 - 继承"><!--[--><!--]--> 面向对象 - 继承 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/lei.html" class="sidebar-item" aria-label="面向对象 - 类"><!--[--><!--]--> 面向对象 - 类 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es6.html" class="sidebar-item" aria-label="ES6 (一)"><!--[--><!--]--> ES6 (一) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es62.html" class="sidebar-item" aria-label="ES6 (二)"><!--[--><!--]--> ES6 (二) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es789.html" class="sidebar-item" aria-label="ES6 +"><!--[--><!--]--> ES6 + <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/ppromise.html" class="sidebar-item" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/diedaiqi.html" class="sidebar-item" aria-label="Iterator - Generator"><!--[--><!--]--> Iterator - Generator <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/asyncawait.html" class="sidebar-item" aria-label="async - await"><!--[--><!--]--> async - await <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/eventloop.html" class="sidebar-item" aria-label="事件循环"><!--[--><!--]--> 事件循环 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/error.html" class="sidebar-item" aria-label="错误处理"><!--[--><!--]--> 错误处理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/mokuaihua.html" class="sidebar-item" aria-label="模块化"><!--[--><!--]--> 模块化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/json.html" class="sidebar-item" aria-label="JSON"><!--[--><!--]--> JSON <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/cunchu.html" class="sidebar-item" aria-label="数据存储"><!--[--><!--]--> 数据存储 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/dombom.html" class="sidebar-item" aria-label="BOM"><!--[--><!--]--> BOM <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/dom.html" class="sidebar-item" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/fangdoujieliu.html" class="sidebar-item" aria-label="手写防抖和节流"><!--[--><!--]--> 手写防抖和节流 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/digui.html" class="sidebar-item" aria-label="递归"><!--[--><!--]--> 递归 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/kuayu.html" class="sidebar-item" aria-label="跨域"><!--[--><!--]--> 跨域 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/shenkaobei.html" class="sidebar-item" aria-label="深拷贝 - 事件总线"><!--[--><!--]--> 深拷贝 - 事件总线 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/baoguanli.html" class="sidebar-item" aria-label="包管理工具"><!--[--><!--]--> 包管理工具 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/basic.html" class="sidebar-item" aria-label="基础知识"><!--[--><!--]--> 基础知识 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/array.html" class="sidebar-item" aria-label="数组"><!--[--><!--]--> 数组 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/reg2.html" class="sidebar-item" aria-label="正则表达式"><!--[--><!--]--> 正则表达式 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/http.html" class="sidebar-item" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">TS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/tsv2/start.html" class="sidebar-item" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/xijie.html" class="sidebar-item" aria-label="语法细节"><!--[--><!--]--> 语法细节 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/hanshu.html" class="sidebar-item" aria-label="函数类型"><!--[--><!--]--> 函数类型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/mianxiangduixiang.html" class="sidebar-item" aria-label="面向对象"><!--[--><!--]--> 面向对象 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">数据结构与算法 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/shujujiegou/start.html" class="sidebar-item" aria-label="栈, 队列, 链表"><!--[--><!--]--> 栈, 队列, 链表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start2.html" class="sidebar-item" aria-label="大O表示法, 哈希表"><!--[--><!--]--> 大O表示法, 哈希表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start3.html" class="sidebar-item" aria-label="树"><!--[--><!--]--> 树 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start4.html" class="sidebar-item" aria-label="图结构 (Graph)"><!--[--><!--]--> 图结构 (Graph) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">微信小程序系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/xiaochengxutixi/peizhi1.html" class="sidebar-item" aria-label="小程序的架构和配置"><!--[--><!--]--> 小程序的架构和配置 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/neizhizujian.html" class="sidebar-item" aria-label="小程序常见的内置组件"><!--[--><!--]--> 小程序常见的内置组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/yufa2.html" class="sidebar-item" aria-label="WXSS-WXML-WXS 语法"><!--[--><!--]--> WXSS-WXML-WXS 语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/shijian.html" class="sidebar-item" aria-label="小程序的事件处理"><!--[--><!--]--> 小程序的事件处理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/zujian.html" class="sidebar-item" aria-label="小程序的组件化开发"><!--[--><!--]--> 小程序的组件化开发 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/api.html" class="sidebar-item" aria-label="小程序系统 API 调用"><!--[--><!--]--> 小程序系统 API 调用 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Git系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/ggit/start.html" class="sidebar-item" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">uni-app <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/uni-app/start.html" class="sidebar-item" aria-label="创建项目"><!--[--><!--]--> 创建项目 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/uni-app/yufa.html" class="sidebar-item" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/uni-app/gouwujie.html" class="sidebar-item" aria-label="购物街项目"><!--[--><!--]--> 购物街项目 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">uni-app项目 <span class="down arrow"></span></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/banlu/start.html" class="sidebar-item" aria-label="项目的搭建"><!--[--><!--]--> 项目的搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/denglu.html" class="sidebar-item" aria-label="微信一键登录"><!--[--><!--]--> 微信一键登录 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/fenxiang.html" class="sidebar-item" aria-label="微信分享和收藏"><!--[--><!--]--> 微信分享和收藏 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/daohangshouwei.html" class="sidebar-item" aria-label="导航守卫"><!--[--><!--]--> 导航守卫 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/fenbao.html" class="sidebar-item" aria-label="分包"><!--[--><!--]--> 分包 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="微信支付 + 收货地址"><!--[--><!--]--> 微信支付 + 收货地址 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html#选择规格" class="router-link-active router-link-exact-active sidebar-item" aria-label="选择规格"><!--[--><!--]--> 选择规格 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html#跳转到下单页面" class="router-link-active router-link-exact-active sidebar-item" aria-label="跳转到下单页面"><!--[--><!--]--> 跳转到下单页面 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html#微信支付流程" class="router-link-active router-link-exact-active sidebar-item" aria-label="微信支付流程"><!--[--><!--]--> 微信支付流程 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html#收货地址" class="router-link-active router-link-exact-active sidebar-item" aria-label="收货地址"><!--[--><!--]--> 收货地址 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html#使用微信的地址" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用微信的地址"><!--[--><!--]--> 使用微信的地址 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html#使用自定义的地址" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用自定义的地址"><!--[--><!--]--> 使用自定义的地址 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html#收货地址列表的增删改查" class="router-link-active router-link-exact-active sidebar-item" aria-label="收货地址列表的增删改查"><!--[--><!--]--> 收货地址列表的增删改查 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/banlu/guige.html#增删改查-改" class="router-link-active router-link-exact-active sidebar-item" aria-label="增删改查 - 改"><!--[--><!--]--> 增删改查 - 改 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3+TS 后台 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/banluhoutai/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3前台项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/front/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/zujian.html" class="sidebar-item" aria-label="构建自己的组件库 - 实现前端设计"><!--[--><!--]--> 构建自己的组件库 - 实现前端设计 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/header.html" class="sidebar-item" aria-label="通用业务 Header 处理方案"><!--[--><!--]--> 通用业务 Header 处理方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/xiangyingshi.html" class="sidebar-item" aria-label="前中台响应式处理方案"><!--[--><!--]--> 前中台响应式处理方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/zhuti.html" class="sidebar-item" aria-label="主题替换解决方案"><!--[--><!--]--> 主题替换解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/changliebiao.html" class="sidebar-item" aria-label="长列表组件 infinite + 图片懒加载(自定义指令)"><!--[--><!--]--> 长列表组件 infinite + 图片懒加载(自定义指令) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/liandong.html" class="sidebar-item" aria-label="多组件联动与高阶组件解决方案"><!--[--><!--]--> 多组件联动与高阶组件解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/xiazai.html" class="sidebar-item" aria-label="前台常见功能解决方案：下载+全屏+引导"><!--[--><!--]--> 前台常见功能解决方案：下载+全屏+引导 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/luyou.html" class="sidebar-item" aria-label="高阶路由过渡处理方案 - 浏览器堆栈主动介入"><!--[--><!--]--> 高阶路由过渡处理方案 - 浏览器堆栈主动介入 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/biaodan.html" class="sidebar-item" aria-label="人类行为验证处理方案 - 脱离UI组件库实现登录、注册+表单校验"><!--[--><!--]--> 人类行为验证处理方案 - 脱离UI组件库实现登录、注册+表单校验 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/tupian.html" class="sidebar-item" aria-label="图片裁剪与上传处理方案 - 基于阿里云 OSS 处理用户资料"><!--[--><!--]--> 图片裁剪与上传处理方案 - 基于阿里云 OSS 处理用户资料 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/yidongduan.html" class="sidebar-item" aria-label="移动端路由切换解决方案  - 虚拟任务栈让 H5 丝滑"><!--[--><!--]--> 移动端路由切换解决方案  - 虚拟任务栈让 H5 丝滑 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/fankui.html" class="sidebar-item" aria-label="用户反馈解决方案 -- 兔小巢构建反馈功能"><!--[--><!--]--> 用户反馈解决方案 -- 兔小巢构建反馈功能 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3旅途项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/hongyuan/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/service.html" class="sidebar-item" aria-label="网络请求封装"><!--[--><!--]--> 网络请求封装 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/start2.html" class="sidebar-item" aria-label="业务 (1)"><!--[--><!--]--> 业务 (1) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/yewu2.html" class="sidebar-item" aria-label="业务 (2)"><!--[--><!--]--> 业务 (2) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/yewu3.html" class="sidebar-item" aria-label="业务 (3)"><!--[--><!--]--> 业务 (3) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3后台管理项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue-admin/dajian.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/denglu.html" class="sidebar-item" aria-label="登录"><!--[--><!--]--> 登录 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/layout.html" class="sidebar-item" aria-label="项目架构之搭建 Layout架构 解决方案与实现"><!--[--><!--]--> 项目架构之搭建 Layout架构 解决方案与实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/tongyong.html" class="sidebar-item" aria-label="通用功能开发"><!--[--><!--]--> 通用功能开发 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/mokuai.html" class="sidebar-item" aria-label="vue3+ElementPlus 基础模块实现"><!--[--><!--]--> vue3+ElementPlus 基础模块实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/yonghu.html" class="sidebar-item" aria-label="excel 、zip 与前端结合解决方案 - 用户管理页面实现"><!--[--><!--]--> excel 、zip 与前端结合解决方案 - 用户管理页面实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/quanxian.html" class="sidebar-item" aria-label="权限受控解决方案"><!--[--><!--]--> 权限受控解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/dongtaibiaoge.html" class="sidebar-item" aria-label="动态表格渲染方案 - 文章排名业务实现"><!--[--><!--]--> 动态表格渲染方案 - 文章排名业务实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/fuwenben.html" class="sidebar-item" aria-label="富文本和 markdown 之 创建文章"><!--[--><!--]--> 富文本和 markdown 之 创建文章 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">日常记账项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/jizhang/dajian.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/jizhang/zujian.html" class="sidebar-item" aria-label="封装业务组件"><!--[--><!--]--> 封装业务组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/jizhang/yewu.html" class="sidebar-item" aria-label="业务功能"><!--[--><!--]--> 业务功能 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">基于Element Plus二次封装组件 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/fengzhuang/dajian.html" class="sidebar-item" aria-label="初级组件 上"><!--[--><!--]--> 初级组件 上 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/fengzhuang/chuxia.html" class="sidebar-item" aria-label="初级组件 - 下"><!--[--><!--]--> 初级组件 - 下 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/fengzhuang/zhongshang.html" class="sidebar-item" aria-label="中级组件"><!--[--><!--]--> 中级组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue2 UI <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue2ui/layout.html" class="sidebar-item" aria-label="Container 布局容器"><!--[--><!--]--> Container 布局容器 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue2ui/toast.html" class="sidebar-item" aria-label="Toast 轻提示"><!--[--><!--]--> Toast 轻提示 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue2ui/tabs.html" class="sidebar-item" aria-label="Tabs 标签页"><!--[--><!--]--> Tabs 标签页 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3 UI <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue3UI/start.html" class="sidebar-item" aria-label="使用 vite 搭建官网"><!--[--><!--]--> 使用 vite 搭建官网 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/switch.html" class="sidebar-item" aria-label="Switch 开关组件"><!--[--><!--]--> Switch 开关组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/dialog.html" class="sidebar-item" aria-label="Dialog 对话框组件"><!--[--><!--]--> Dialog 对话框组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/Tabs.html" class="sidebar-item" aria-label="Tabs 标签页组件"><!--[--><!--]--> Tabs 标签页组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/Tooltip.html" class="sidebar-item" aria-label="Tooltip 文字提示组件"><!--[--><!--]--> Tooltip 文字提示组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/build.html" class="sidebar-item" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">HRSaas项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/hrsass/start.html" class="sidebar-item" aria-label="项目搭建"><!--[--><!--]--> 项目搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/login.html" class="sidebar-item" aria-label="登录模块"><!--[--><!--]--> 登录模块 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/zhuye.html" class="sidebar-item" aria-label="主页模块"><!--[--><!--]--> 主页模块 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/luyou.html" class="sidebar-item" aria-label="路由和页面"><!--[--><!--]--> 路由和页面 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/zuzhijiagou.html" class="sidebar-item" aria-label="组织架构"><!--[--><!--]--> 组织架构 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/gongsi.html" class="sidebar-item" aria-label="公司和角色"><!--[--><!--]--> 公司和角色 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/yuangong.html" class="sidebar-item" aria-label="员工管理"><!--[--><!--]--> 员工管理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/tupian.html" class="sidebar-item" aria-label="图片上传预览及打印"><!--[--><!--]--> 图片上传预览及打印 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/quanxian.html" class="sidebar-item" aria-label="权限"><!--[--><!--]--> 权限 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/shouye.html" class="sidebar-item" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/tab.html" class="sidebar-item" aria-label="多语言tab页全屏主题"><!--[--><!--]--> 多语言tab页全屏主题 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/bushu.html" class="sidebar-item" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3 + TS 后台管理项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/cms/code.html" class="sidebar-item" aria-label="项目搭建规范"><!--[--><!--]--> 项目搭建规范 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/axioos.html" class="sidebar-item" aria-label="axios的基本使用"><!--[--><!--]--> axios的基本使用 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/axiosF.html" class="sidebar-item" aria-label="axios 封装"><!--[--><!--]--> axios 封装 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/1.html" class="sidebar-item" aria-label="项目 1"><!--[--><!--]--> 项目 1 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/2.html" class="sidebar-item" aria-label="项目 2"><!--[--><!--]--> 项目 2 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/3.html" class="sidebar-item" aria-label="项目 3"><!--[--><!--]--> 项目 3 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/4.html" class="sidebar-item" aria-label="项目 4"><!--[--><!--]--> 项目 4 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/5.html" class="sidebar-item" aria-label="项目 5"><!--[--><!--]--> 项目 5 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/6.html" class="sidebar-item" aria-label="项目 6"><!--[--><!--]--> 项目 6 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/7.html" class="sidebar-item" aria-label="/cms/7.md"><!--[--><!--]--> /cms/7.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">每日头条项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/toutiao/chushihua.html" class="sidebar-item" aria-label="项目初始化"><!--[--><!--]--> 项目初始化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/denglu.html" class="sidebar-item" aria-label="登录注册"><!--[--><!--]--> 登录注册 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/geren.html" class="sidebar-item" aria-label="个人中心"><!--[--><!--]--> 个人中心 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/wenzhang.html" class="sidebar-item" aria-label="首页 - 文章列表"><!--[--><!--]--> 首页 - 文章列表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/pindao.html" class="sidebar-item" aria-label="首页 - 频道编辑"><!--[--><!--]--> 首页 - 频道编辑 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/sousuo.html" class="sidebar-item" aria-label="文章搜索"><!--[--><!--]--> 文章搜索 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/xiangqing.html" class="sidebar-item" aria-label="文章详情"><!--[--><!--]--> 文章详情 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/pinglun.html" class="sidebar-item" aria-label="文章评论"><!--[--><!--]--> 文章评论 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/bianji.html" class="sidebar-item" aria-label="编辑资料"><!--[--><!--]--> 编辑资料 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="微信支付-收货地址" tabindex="-1"><a class="header-anchor" href="#微信支付-收货地址" aria-hidden="true">#</a> 微信支付 + 收货地址</h1><h2 id="选择规格" tabindex="-1"><a class="header-anchor" href="#选择规格" aria-hidden="true">#</a> 选择规格</h2><ol><li>定义接口 - 获取商品详情</li></ol><p><code>utils/api/goods.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> uni<span class="token punctuation">.</span>$u<span class="token punctuation">.</span>http
 
<span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token comment">// 商品详情 </span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getGoodsDetail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/mall/goods/get/&#39;</span><span class="token operator">+</span> id<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li>实现逻辑, 很复杂</li></ol><h3 id="跳转到下单页面" tabindex="-1"><a class="header-anchor" href="#跳转到下单页面" aria-hidden="true">#</a> 跳转到下单页面</h3><p><img src="/myBlog-vp/assets/que1.f205f935.png" alt="图片"> 选择完商品规格后点击立即购买, 会跳转到下单页面</p><p>当然需要把选择后的商品信息<strong>传递给</strong>下单页面, 怎么传递(页面间通讯)?</p><p>这里使用了 <code>eventChannel</code>(并要注意 <code>this</code> 指向的改变 )</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">confirmOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//点击了立即购买</span>
    <span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span> 
    uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&#39;/pages_order/confirmOrder/confirmOrder&#39;</span><span class="token punctuation">,</span>
      <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>eventChannel<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;confirmOrder&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>that<span class="token punctuation">.</span>currentGoods <span class="token punctuation">,</span>
          <span class="token literal-property property">count</span><span class="token operator">:</span> that<span class="token punctuation">.</span>count
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>下单页: <code>eventChannel</code> 接受传递过来的数据</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// eventChannel 通讯</span>
        <span class="token keyword">const</span> eventChannel <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOpenerEventChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        eventChannel<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;confirmOrder&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>goodsItem <span class="token operator">=</span> res
          <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> res<span class="token punctuation">.</span>count
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="微信支付流程" tabindex="-1"><a class="header-anchor" href="#微信支付流程" aria-hidden="true">#</a> 微信支付流程</h3><p>先封装接口</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// `utils/api/order.js`</span>
<span class="token comment">// 订单相关</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> uni<span class="token punctuation">.</span>$u<span class="token punctuation">.</span>http

 <span class="token comment">// 微信支付</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">paymentTrade</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/payment/trade&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token comment">// `utils/api/address.js`</span>
<span class="token comment">// 地址相关</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> uni<span class="token punctuation">.</span>$u<span class="token punctuation">.</span>http
<span class="token operator">...</span>
<span class="token comment">// 获取收货地址列表</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getAddressList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/mall/address/list&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ol><li><strong>调用后端接口 =&gt; 传递参数</strong> (<code>key, uid,goods: {spuId, skuId,counter},remark,addressId</code>)</li></ol><ul><li><strong>后端返回给前端, 小程序支付参数</strong></li></ul><ol start="2"><li><strong>调用 <a href="https://uniapp.dcloud.net.cn/api/plugins/payment.html#requestpayment" target="_blank" rel="noopener noreferrer">uni.requestPayment(OBJECT)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong></li></ol><ul><li><strong>需要把小程序支付参数(<code>timeStamp, nonceStr,package, signType, paySign</code>), 传递过去, 即付款就成功</strong></li></ul><p><img src="/myBlog-vp/assets/tong1.602d7b44.png" alt="图片"></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>writeAddress<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>填写地址<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>payment<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交订单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>getAddressList<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/api/address.js&#39;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>paymentTrade<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/api/order.js&#39;</span> 
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">goodsItem</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 商品数据 (页面间传递过来的)</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 收货地址列表 (调接口后筛选出默认地址)</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token comment">// 商品数量</span>
        <span class="token literal-property property">remark</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span>  <span class="token comment">// 备注</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// eventChannel 通讯</span>
        <span class="token keyword">const</span> eventChannel <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOpenerEventChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        eventChannel<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;confirmOrder&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>goodsItem <span class="token operator">=</span> res
          <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> res<span class="token punctuation">.</span>count
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 获取地址</span>
      <span class="token function">getAddressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">address</span> <span class="token operator">=&gt;</span> address<span class="token punctuation">.</span>defaulted <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 筛选默认地址</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">writeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 点击了填写地址</span>
        uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&#39;/pages_address/address/address&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">payment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 点击提交订单</span>
          <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">//时间戳</span>
                <span class="token literal-property property">uid</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>userInfo<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token comment">//当前登录用户ID</span>
                <span class="token literal-property property">goods</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">spuId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goodsItem<span class="token punctuation">.</span>spuId<span class="token punctuation">,</span><span class="token comment">//商品ID，如（Apple 14 Pro Max）</span>
                    <span class="token literal-property property">skuId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goodsItem<span class="token punctuation">.</span>id<span class="token punctuation">,</span><span class="token comment">//商品规格ID，如（国行 黑色 512G 公开版）</span>
                    <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token comment">//数量  &lt;-----------------------------------数量 </span>
                <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token literal-property property">remark</span><span class="token operator">:</span> <span class="token string">&quot;备注&quot;</span><span class="token punctuation">,</span><span class="token comment">//备注</span>
                <span class="token literal-property property">addressId</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>address<span class="token punctuation">.</span>id<span class="token comment">//地址ID</span>
          <span class="token punctuation">}</span>
          <span class="token comment">// console.log(params)</span>
          <span class="token function">paymentTrade</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// console.log(res)</span>
            <span class="token keyword">const</span> params <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>params  <span class="token comment">// 在上面获取到的小程序支付参数</span>
            uni<span class="token punctuation">.</span><span class="token function">requestPayment</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">// &lt;-----------  uni.requestPayment</span>
              <span class="token literal-property property">timeStamp</span><span class="token operator">:</span> params<span class="token punctuation">.</span>timeStamp<span class="token punctuation">,</span>
              <span class="token literal-property property">nonceStr</span><span class="token operator">:</span> params<span class="token punctuation">.</span>nonceStr<span class="token punctuation">,</span>
              <span class="token keyword">package</span><span class="token operator">:</span> params<span class="token punctuation">.</span>package<span class="token punctuation">,</span>
              <span class="token literal-property property">signType</span><span class="token operator">:</span> params<span class="token punctuation">.</span>signType<span class="token punctuation">,</span>
              <span class="token literal-property property">paySign</span><span class="token operator">:</span> params<span class="token punctuation">.</span>paySign<span class="token punctuation">,</span>
              <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// 支付成功</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><h2 id="收货地址" tabindex="-1"><a class="header-anchor" href="#收货地址" aria-hidden="true">#</a> 收货地址</h2><h3 id="使用微信的地址" tabindex="-1"><a class="header-anchor" href="#使用微信的地址" aria-hidden="true">#</a> 使用微信的地址</h3><ol><li>情况一: 自定义编写地址</li><li><strong>情况二: 使用微信的地址</strong> : <a href="https://uniapp.dcloud.net.cn/api/other/choose-address.html#chooseaddress" target="_blank" rel="noopener noreferrer">uni.chooseAddress(OBJECT)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>获取用户收货地址, 掉漆用户编辑收货地址原生界面 , 并在编辑完成后返回用户选择的地址, 需要用户授权 scope.address</li></ol><ul><li>然后在调用后端接口把收货地址存到数据库</li></ul><p><img src="/myBlog-vp/assets/shou1.e512998c.png" alt="图片"></p><p>点击{ 添加收货地址 } 按钮时, 弹出对话框, 点击了确认就调用 <code>uni.chooseAddress()</code>, 点击了取消就跳转到自定义填写收货地址页面</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">onClickAddAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 点击了添加收货地址</span>
            uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;提示&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">&#39;是否使用微信收货地址&#39;</span><span class="token punctuation">,</span>
              <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token comment">// 点击了确定</span>
                  uni<span class="token punctuation">.</span><span class="token function">chooseAddress</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>   
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>   <span class="token comment">// &lt;!--    会报错</span>
                    <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                  <span class="token comment">// 点击了取消</span>
                  <span class="token comment">// TODO: 自定义填写收货地址</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><code>uni.chooseAddress()</code>会报错 <img src="/myBlog-vp/assets/adderr1.63e14827.png" alt="图片"></p><p>自 2022 年 7 月 14 日后发布的小程序，若使用该接口，需要在 <code>app.json</code> 中进行声明，否则将无法正常使用该接口 022年7月14日前发布的小程序不受影响。<a href="https://developers.weixin.qq.com/community/develop/doc/000a02f2c5026891650e7f40351c01" target="_blank" rel="noopener noreferrer">具体规则见公告<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>解决方法：uniapp项目</strong>:</p><ul><li>在 <code>manifest.json</code> 的 <code>&quot;mp-weixin&quot;</code> 节点进行配置</li><li>加上：<code>&quot;requiredPrivateInfos&quot;: [&quot;getLocation&quot;, &quot;chooseLocation&quot;, &quot;chooseAddress&quot;]</code></li></ul><p><img src="/myBlog-vp/assets/blerr1.d069c514.png" alt="图片"></p><ol><li>定义接口..</li></ol><p><code>utils/api/address.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 用户相关</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> uni<span class="token punctuation">.</span>$u<span class="token punctuation">.</span>http
<span class="token comment">// 添加收货地址</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">addAddress</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/mall/address/add&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>address.vue</code></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">onClickAddAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 点击了添加收货地址</span>
            uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;提示&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">&#39;是否使用微信收货地址&#39;</span><span class="token punctuation">,</span>
              <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token comment">// 点击了确定</span>
                  uni<span class="token punctuation">.</span><span class="token function">chooseAddress</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
                            <span class="token literal-property property">name</span><span class="token operator">:</span> res<span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
                            <span class="token literal-property property">mobile</span><span class="token operator">:</span> res<span class="token punctuation">.</span>telNumber<span class="token punctuation">,</span>
                            <span class="token literal-property property">province</span><span class="token operator">:</span>res<span class="token punctuation">.</span>provinceName<span class="token punctuation">,</span>
                            <span class="token literal-property property">city</span><span class="token operator">:</span>res<span class="token punctuation">.</span>cityName<span class="token punctuation">,</span>
                            <span class="token literal-property property">county</span><span class="token operator">:</span> res<span class="token punctuation">.</span>countyName<span class="token punctuation">,</span>
                            <span class="token literal-property property">address</span><span class="token operator">:</span> res<span class="token punctuation">.</span>detailInfo<span class="token punctuation">,</span>
                            <span class="token literal-property property">defaulted</span><span class="token operator">:</span> <span class="token number">1</span>  <span class="token comment">//是否默认（1：默认；0：非默认）</span>
                      <span class="token punctuation">}</span>
                      <span class="token function">addAddress</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
                      <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>   <span class="token comment">// &lt;!--    会报错</span>
                    <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                  <span class="token comment">// 点击了取消</span>
                  <span class="token comment">// TODO: 自定义填写收货地址</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="使用自定义的地址" tabindex="-1"><a class="header-anchor" href="#使用自定义的地址" aria-hidden="true">#</a> 使用自定义的地址</h3><p>首先创建新的页面 -&gt; 添加收货地址页面</p><p>这个页面共同会被使用到 <strong>编辑收货地址</strong> 和 <strong>新增收货地址的情况</strong></p><p>怎么判断是否是<strong>编辑/新增</strong>? 跳转时通过字符串拼接传递 <strong>id</strong>, 在 <code>onLoad(options)</code> 判断是否有 <code>id</code> 存在</p><ul><li>如果存在, 则为编辑状态, 如果 id 不存在, 是新增的情况 (这些逻辑在下面增删改查中处理)</li></ul><p><img src="/myBlog-vp/assets/tian1.3a67146e.png" alt="图片"></p><p>点击了添加地址后, 要回到上一页</p><p><code>pages_address/addAddress/addAddress.vue</code></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>收货人<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u--input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>昵称<span class="token punctuation">&quot;</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>surround<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u--input</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>手机号码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u--input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>手机号<span class="token punctuation">&quot;</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>surround<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u--input</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>所在地区<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u--input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>省/市/区/街道<span class="token punctuation">&quot;</span></span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>surround<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@focus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputFocus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u--input</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address-detail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>详细地址<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u--textarea</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addressDetail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>小区楼栋/乡村名称<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u--textarea</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-switch</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>defaulted<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:inactiveValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:activeValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>switchChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-switch</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>设为默认地址<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-picker</span> <span class="token attr-name">:closeOnClickOverlay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uPicker<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:columns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>columns<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@confirm</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>confirm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>changeHandler<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@cancel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-picker</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-button</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#3d3d3d<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shape</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>circle<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickAddAddress<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>添加收货地址<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/static/address.js&#39;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>addAddress<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@2/../../utils/api/address.js&#39;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 姓名</span>
        <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 手机号</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 所在地区</span>
        <span class="token literal-property property">addressDetail</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 详细地址</span>
        <span class="token literal-property property">defaulted</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 省市区选择器显示</span>
       <span class="token literal-property property">columns</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token comment">//三级联动数据</span>
      <span class="token literal-property property">origilData</span><span class="token operator">:</span>address<span class="token punctuation">,</span> <span class="token comment">//获取到address原始数据值</span>
      <span class="token literal-property property">provice</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 省</span>
      <span class="token literal-property property">city</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 市</span>
      <span class="token literal-property property">county</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span> <span class="token comment">// 区</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span> <span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token function">switchChange</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// 1 为默认</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">inputFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// 所在地区的输入框被 focus</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      		<span class="token comment">//初始化三级联动数据</span>
      		<span class="token function">handleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      			<span class="token keyword">let</span> sheng <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      			<span class="token keyword">let</span> shi <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      			<span class="token keyword">let</span> qu <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      			<span class="token keyword">this</span><span class="token punctuation">.</span>origilData<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      				<span class="token comment">//所有一级</span>
      				sheng<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      				<span class="token comment">//设置初始化值</span>
      				<span class="token keyword">if</span><span class="token punctuation">(</span> item<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token string">&#39;北京市&#39;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      					item<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      						shi<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      						<span class="token keyword">if</span><span class="token punctuation">(</span> child<span class="token punctuation">.</span>value<span class="token operator">==</span><span class="token string">&#39;北京市&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      							child<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      								qu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      							<span class="token punctuation">}</span><span class="token punctuation">)</span>
      						<span class="token punctuation">}</span>
      					<span class="token punctuation">}</span><span class="token punctuation">)</span>
      				<span class="token punctuation">}</span>
      			<span class="token punctuation">}</span><span class="token punctuation">)</span>
      			<span class="token keyword">this</span><span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
      				sheng<span class="token punctuation">,</span>
      				shi<span class="token punctuation">,</span>
      				qu
      			<span class="token punctuation">)</span>
      		<span class="token punctuation">}</span><span class="token punctuation">,</span>
      		<span class="token comment">//当三级联动选择值变化时触发</span>
      		<span class="token function">changeHandler</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      			
      			<span class="token keyword">const</span> <span class="token punctuation">{</span>
      				columnIndex<span class="token punctuation">,</span>
      				index<span class="token punctuation">,</span>
      				indexs<span class="token punctuation">,</span>
      				value<span class="token punctuation">,</span>
      				values<span class="token punctuation">,</span>
      				picker <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>uPicker
      			<span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
      			<span class="token comment">//当第一列值发生变化时，更新第二列数据</span>
      			<span class="token keyword">if</span><span class="token punctuation">(</span> columnIndex <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      				<span class="token keyword">this</span><span class="token punctuation">.</span>origilData<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      					<span class="token keyword">if</span><span class="token punctuation">(</span> value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> item<span class="token punctuation">.</span>value <span class="token punctuation">)</span><span class="token punctuation">{</span>
      						<span class="token keyword">let</span> shi <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      						<span class="token keyword">let</span> flag <span class="token operator">=</span> item<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      						item<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span>ol</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      							shi<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      							<span class="token keyword">if</span><span class="token punctuation">(</span> shi<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> flag <span class="token punctuation">)</span><span class="token punctuation">{</span>
      								flag <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
      								<span class="token keyword">let</span> qu <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      								val<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">vol</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      									qu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vol<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      								<span class="token punctuation">}</span><span class="token punctuation">)</span>
      								picker<span class="token punctuation">.</span><span class="token function">setColumnValues</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>qu<span class="token punctuation">)</span><span class="token punctuation">;</span>
      							<span class="token punctuation">}</span>
      						<span class="token punctuation">}</span><span class="token punctuation">)</span>
      						picker<span class="token punctuation">.</span><span class="token function">setColumnValues</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>shi<span class="token punctuation">)</span><span class="token punctuation">;</span>
      					<span class="token punctuation">}</span>
      				<span class="token punctuation">}</span><span class="token punctuation">)</span>
      			<span class="token punctuation">}</span>
      			<span class="token comment">//当第二列值发生变化时，更新第三列数据</span>
      			<span class="token keyword">if</span><span class="token punctuation">(</span> columnIndex <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      				<span class="token keyword">this</span><span class="token punctuation">.</span>origilData<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      					<span class="token keyword">if</span><span class="token punctuation">(</span> value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> item<span class="token punctuation">.</span>value <span class="token punctuation">)</span><span class="token punctuation">{</span>
      						<span class="token keyword">let</span> shi <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      						item<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span>ol</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      							shi<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      							<span class="token keyword">if</span><span class="token punctuation">(</span> value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> val<span class="token punctuation">.</span>value <span class="token punctuation">)</span><span class="token punctuation">{</span>
      								<span class="token keyword">let</span> qu <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      								val<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">vol</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      									qu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>vol<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      								<span class="token punctuation">}</span><span class="token punctuation">)</span>
      								picker<span class="token punctuation">.</span><span class="token function">setColumnValues</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>qu<span class="token punctuation">)</span><span class="token punctuation">;</span>
      							<span class="token punctuation">}</span>
      						<span class="token punctuation">}</span><span class="token punctuation">)</span>
      					<span class="token punctuation">}</span>
      				<span class="token punctuation">}</span><span class="token punctuation">)</span>
      			<span class="token punctuation">}</span>
      		<span class="token punctuation">}</span><span class="token punctuation">,</span>
      		<span class="token comment">//选择三级联动数据</span>
      		<span class="token function">confirm</span><span class="token punctuation">(</span> <span class="token parameter">e</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      			<span class="token keyword">this</span><span class="token punctuation">.</span>cityVal <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      			<span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      			<span class="token keyword">this</span><span class="token punctuation">.</span>province <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      			<span class="token keyword">this</span><span class="token punctuation">.</span>city <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      			<span class="token keyword">this</span><span class="token punctuation">.</span>county <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>province <span class="token operator">+</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>city <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>county 
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>province<span class="token punctuation">,</span>   <span class="token keyword">this</span><span class="token punctuation">.</span>city<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>county <span class="token punctuation">)</span>
      		<span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">onClickAddAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
               <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token comment">//收货人姓名</span>
                  <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mobile<span class="token punctuation">,</span><span class="token comment">//收货人电话</span>
                  <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>province<span class="token punctuation">,</span><span class="token comment">//省</span>
                  <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>city<span class="token punctuation">,</span><span class="token comment">//市</span>
                  <span class="token literal-property property">county</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>county<span class="token punctuation">,</span><span class="token comment">//县</span>
                  <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>addressDetail<span class="token punctuation">,</span><span class="token comment">//详细地址</span>
                  <span class="token literal-property property">defaulted</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaulted<span class="token comment">//是否默认（1：默认；0：非默认）</span>
            <span class="token punctuation">}</span>
            <span class="token function">addAddress</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
              uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">delta</span><span class="token operator">:</span><span class="token number">1</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br></div></div><h3 id="收货地址列表的增删改查" tabindex="-1"><a class="header-anchor" href="#收货地址列表的增删改查" aria-hidden="true">#</a> 收货地址列表的增删改查</h3><p><img src="/myBlog-vp/assets/shangdan1.89da3c12.png" alt="图片"></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--没有收货地址--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no-address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addressList.length === 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no-content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@/static/images/noContent.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widthFix<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>你还没有添加地址信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--有收货地址--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address,index in addressList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address-icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/images/address.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widthFix<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>detail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickAddress(address)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nameAndMobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{address.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mobile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{address.mobile}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>place<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              {{address.province +&#39; &#39; + address.city +&#39; &#39; + address.county +&#39; &#39; + address.address}}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--编辑--&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>edit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickEdit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/images/bianji.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>widthFix<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>moren<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--设为默认地址--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-radio-group</span>
                <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radioValue<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radioChange(address)<span class="token punctuation">&quot;</span></span>
              <span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-radio</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>默认地址<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address.defaulted<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-radio</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-radio-group</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!--删除--&gt;</span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>delete<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickDelete(address)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>trash<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>19<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-icon</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--添加收货地址--&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>button-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u-button</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#3d3d3d<span class="token punctuation">&quot;</span></span> <span class="token attr-name">shape</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>circle<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onClickAddAddress<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>填写收货地址<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>addAddress<span class="token punctuation">,</span> getAddressList<span class="token punctuation">,</span>deleteAddress<span class="token punctuation">,</span>defaultAddress<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/api/address.js&#39;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">radioValue</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">addressList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment">// 收货地址列表</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAddressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">onClickAddAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// 点击新增收货地址蛋妞</span>
            uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;提示&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">&#39;是否使用微信收货地址&#39;</span><span class="token punctuation">,</span>
              <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token comment">// 点击了确定</span>
                  uni<span class="token punctuation">.</span><span class="token function">chooseAddress</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
                            <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> res<span class="token punctuation">.</span>userName<span class="token punctuation">,</span>
                            <span class="token string-property property">&quot;mobile&quot;</span><span class="token operator">:</span> res<span class="token punctuation">.</span>telNumber<span class="token punctuation">,</span>
                            <span class="token string-property property">&quot;province&quot;</span><span class="token operator">:</span>res<span class="token punctuation">.</span>provinceName<span class="token punctuation">,</span>
                            <span class="token string-property property">&quot;city&quot;</span><span class="token operator">:</span>res<span class="token punctuation">.</span>cityName<span class="token punctuation">,</span>
                            <span class="token string-property property">&quot;county&quot;</span><span class="token operator">:</span> res<span class="token punctuation">.</span>countyName<span class="token punctuation">,</span>
                            <span class="token string-property property">&quot;address&quot;</span><span class="token operator">:</span> res<span class="token punctuation">.</span>detailInfo<span class="token punctuation">,</span>
                            <span class="token string-property property">&quot;defaulted&quot;</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token comment">//是否默认（1：默认；0：非默认）</span>
                      <span class="token punctuation">}</span>
                      <span class="token function">addAddress</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
                      <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 获取收货地址列表, 单独封装方法</span>
        <span class="token function">getAddressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token function">getAddressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>addressList <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">onClickAddress</span><span class="token punctuation">(</span><span class="token parameter">address</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//点击了某一个地址(需要传递到上一页)</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;点击了某一个地址&#39;</span><span class="token punctuation">)</span>
          uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">delta</span><span class="token operator">:</span>  <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> eventChannel  <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOpenerEventChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            eventChannel<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;acceptAddress&#39;</span><span class="token punctuation">,</span>address<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">onClickEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 点击了编辑</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;编辑&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">onClickDelete</span><span class="token punctuation">(</span><span class="token parameter">address</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 点击了删除</span>
        <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
          uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;提示&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">content</span><span class="token operator">:</span><span class="token string">&#39;确定要删除此收货地址吗?&#39;</span><span class="token punctuation">,</span>
            <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token function">deleteAddress</span><span class="token punctuation">(</span>address<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                      uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                        <span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;删除成功&#39;</span>
                      <span class="token punctuation">}</span><span class="token punctuation">)</span>
                      that<span class="token punctuation">.</span><span class="token function">getAddressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> 
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">radioChange</span><span class="token punctuation">(</span><span class="token parameter">address</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// 默认地址修改</span>
          <span class="token function">defaultAddress</span><span class="token punctuation">(</span>address<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addressList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br></div></div><h3 id="增删改查-改" tabindex="-1"><a class="header-anchor" href="#增删改查-改" aria-hidden="true">#</a> 增删改查 - 改</h3><p>怎么判断是否是<strong>编辑/新增</strong>? 跳转时通过字符串拼接传递 <strong>id</strong>, 在 <code>onLoad(options)</code> 判断是否有 <code>id</code> 存在</p><ul><li>如果存在, 则为编辑状态, 如果 id 不存在, 是新增的情况</li></ul><p><img src="/myBlog-vp/assets/eded1.f09fad1e.png" alt="图片"></p><ol><li>先封装对应接口</li><li>点击编辑按钮, 跳转时传递 <code>id</code></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>   <span class="token function">onClickEdit</span><span class="token punctuation">(</span><span class="token parameter">address</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 点击了编辑</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;编辑&#39;</span><span class="token punctuation">)</span>
      uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/pages_address/addAddress/addAddress?id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>address<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token operator">--</span>字符串拼接 id 传入<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>发请求得到详细地址再渲染模板, 然后再<strong>区分编辑/新增状态</strong>调接口保存地址</li></ol><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> address <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/static/address.js&#39;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>addAddress<span class="token punctuation">,</span> getAddressDetail<span class="token punctuation">,</span> editAddress<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/api/address.js&#39;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 姓名</span>
        <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 手机号</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 所在地区</span>
        <span class="token literal-property property">addressDetail</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 详细地址</span>
        <span class="token literal-property property">defaulted</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 省市区选择器显示</span>
        <span class="token literal-property property">columns</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token comment">//三级联动数据</span>
        <span class="token literal-property property">origilData</span><span class="token operator">:</span>address<span class="token punctuation">,</span> <span class="token comment">//获取到address原始数据值</span>
        <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 省</span>
        <span class="token literal-property property">city</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 市</span>
        <span class="token literal-property property">county</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 区</span>
        <span class="token literal-property property">addressId</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span>  <span class="token comment">// 判断编辑/新增状态</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      
      <span class="token keyword">if</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 编辑状态           </span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>addressId <span class="token operator">=</span> options<span class="token punctuation">.</span>id
        uni<span class="token punctuation">.</span><span class="token function">setNavigationBarTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;修改收货地址&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">getAddressDetail</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data 
          <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> data<span class="token punctuation">.</span>name
          <span class="token keyword">this</span><span class="token punctuation">.</span>mobile <span class="token operator">=</span> data<span class="token punctuation">.</span>mobile
          <span class="token keyword">this</span><span class="token punctuation">.</span>address <span class="token operator">=</span> data<span class="token punctuation">.</span>province <span class="token operator">+</span> data<span class="token punctuation">.</span>city <span class="token operator">+</span> data<span class="token punctuation">.</span>county
          <span class="token keyword">this</span><span class="token punctuation">.</span>defaulted <span class="token operator">=</span> data<span class="token punctuation">.</span>defaulted
          <span class="token keyword">this</span><span class="token punctuation">.</span>addressDetail <span class="token operator">=</span> data<span class="token punctuation">.</span>address
          <span class="token keyword">this</span><span class="token punctuation">.</span>city <span class="token operator">=</span> data<span class="token punctuation">.</span>city
          <span class="token keyword">this</span><span class="token punctuation">.</span>county <span class="token operator">=</span> data<span class="token punctuation">.</span>county 
          <span class="token keyword">this</span><span class="token punctuation">.</span>province <span class="token operator">=</span> data<span class="token punctuation">.</span>province 
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span> <span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token operator">...</span>
          <span class="token operator">...</span>
          <span class="token function">onClickAddAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>addressId<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 编辑收货地址</span>
              <span class="token keyword">const</span> editParams <span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>addressId<span class="token punctuation">,</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> 
                    <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mobile<span class="token punctuation">,</span>
                    <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>province<span class="token punctuation">,</span>
                    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>city<span class="token punctuation">,</span>
                    <span class="token literal-property property">county</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>county<span class="token punctuation">,</span>
                    <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>addressDetail<span class="token punctuation">,</span>
                    <span class="token literal-property property">defaulted</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaulted
              <span class="token punctuation">}</span>
              <span class="token function">editAddress</span><span class="token punctuation">(</span>editParams<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
                  uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">delta</span><span class="token operator">:</span><span class="token number">1</span>
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">// 新增收货地址</span>
              <span class="token keyword">const</span> AddParams <span class="token operator">=</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token comment">//收货人姓名</span>
                    <span class="token literal-property property">mobile</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mobile<span class="token punctuation">,</span><span class="token comment">//收货人电话</span>
                    <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>province<span class="token punctuation">,</span><span class="token comment">//省</span>
                    <span class="token literal-property property">city</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>city<span class="token punctuation">,</span><span class="token comment">//市</span>
                    <span class="token literal-property property">county</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>county<span class="token punctuation">,</span><span class="token comment">//县</span>
                    <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>addressDetail<span class="token punctuation">,</span><span class="token comment">//详细地址</span>
                    <span class="token literal-property property">defaulted</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaulted<span class="token comment">//是否默认（1：默认；0：非默认）</span>
              <span class="token punctuation">}</span>
              <span class="token function">addAddress</span><span class="token punctuation">(</span>AddParams<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
                uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                  <span class="token literal-property property">delta</span><span class="token operator">:</span><span class="token number">1</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><!--]--></div><footer class="page-meta"><!----><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 932274204@qq.com">jgoriginal</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/myBlog-vp/banlu/fenbao.html" class="" aria-label="分包"><!--[--><!--]--> 分包 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/myBlog-vp/assets/app.fcb85f29.js" defer></script>
  </body>
</html>
