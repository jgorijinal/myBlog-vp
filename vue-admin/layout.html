<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="stylesheet" href="/css/index.css"><title>项目架构之搭建 Layout架构 解决方案与实现 | Eren的个人文档 - 记录优于记忆</title><meta name="description" content="这是我的第一个 VuePress 站点">
    <link rel="modulepreload" href="/myBlog-vp/assets/app.fcb85f29.js"><link rel="modulepreload" href="/myBlog-vp/assets/layout.html.a07678db.js"><link rel="modulepreload" href="/myBlog-vp/assets/layout.html.f19864a1.js">
    <link rel="stylesheet" href="/myBlog-vp/assets/style.0e2ef2fa.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/myBlog-vp/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt="Eren的个人文档 - 记录优于记忆"><span class="site-name can-hide">Eren的个人文档 - 记录优于记忆</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">HTML系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/html/start.html" class="sidebar-item" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">CSS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/css/start.html" class="sidebar-item" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/text.html" class="sidebar-item" aria-label="text  - font - 选择器"><!--[--><!--]--> text  - font - 选择器 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/jicheng.html" class="sidebar-item" aria-label="继承 - 层叠 - 元素类型"><!--[--><!--]--> 继承 - 层叠 - 元素类型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/hezi.html" class="sidebar-item" aria-label="盒子模型"><!--[--><!--]--> 盒子模型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/beijing.html" class="sidebar-item" aria-label="CSS设置背景"><!--[--><!--]--> CSS设置背景 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai.html" class="sidebar-item" aria-label="额外知识"><!--[--><!--]--> 额外知识 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/fudong.html" class="sidebar-item" aria-label="浮动"><!--[--><!--]--> 浮动 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/flex.html" class="sidebar-item" aria-label="flex 布局"><!--[--><!--]--> flex 布局 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai2.html" class="sidebar-item" aria-label="额外知识 (2)"><!--[--><!--]--> 额外知识 (2) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/ewai3.html" class="sidebar-item" aria-label="额外知识 (3)"><!--[--><!--]--> 额外知识 (3) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/css/shipei.html" class="sidebar-item" aria-label="移动端适配"><!--[--><!--]--> 移动端适配 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue3/vue3.html" class="sidebar-item" aria-label="Vue2到Vue3的变化"><!--[--><!--]--> Vue2到Vue3的变化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/life.html" class="sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/communication.html" class="sidebar-item" aria-label="组件通信"><!--[--><!--]--> 组件通信 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/dynamic.html" class="sidebar-item" aria-label="动态组件"><!--[--><!--]--> 动态组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/async.html" class="sidebar-item" aria-label="异步组件"><!--[--><!--]--> 异步组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/v-model.html" class="sidebar-item" aria-label="v-model"><!--[--><!--]--> v-model <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/start.html" class="sidebar-item" aria-label="Vue 基础"><!--[--><!--]--> Vue 基础 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/options.html" class="sidebar-item" aria-label="Options API"><!--[--><!--]--> Options API <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/mixin.html" class="sidebar-item" aria-label="Mixin 和 extends"><!--[--><!--]--> Mixin 和 extends <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/directives.html" class="sidebar-item" aria-label="自定义指令"><!--[--><!--]--> 自定义指令 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/chajian.html" class="sidebar-item" aria-label="Vue 插件"><!--[--><!--]--> Vue 插件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/composition.html" class="sidebar-item" aria-label="Composition API"><!--[--><!--]--> Composition API <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/h.html" class="sidebar-item" aria-label="h()函数"><!--[--><!--]--> h()函数 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3/transition.html" class="sidebar-item" aria-label="Transition 过度动画"><!--[--><!--]--> Transition 过度动画 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue Router系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue-router/router.html" class="sidebar-item" aria-label="路由的原理"><!--[--><!--]--> 路由的原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-router/start.html" class="sidebar-item" aria-label="vue-router的基本使用"><!--[--><!--]--> vue-router的基本使用 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vuex系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vuex/start.html" class="sidebar-item" aria-label="Vuex"><!--[--><!--]--> Vuex <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Pinia系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/pinia/start.html" class="sidebar-item" aria-label="Pinia"><!--[--><!--]--> Pinia <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Webpack <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/gongcheng/start.html" class="sidebar-item" aria-label="webpack 入门"><!--[--><!--]--> webpack 入门 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/gongcheng/gaoji.html" class="sidebar-item" aria-label="高级概念"><!--[--><!--]--> 高级概念 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/gongcheng/fuxi.html" class="sidebar-item" aria-label="webpack 复习和总结"><!--[--><!--]--> webpack 复习和总结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">JS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/JS/xuanranyuanli.html" class="sidebar-item" aria-label="浏览器的渲染原理"><!--[--><!--]--> 浏览器的渲染原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/yunxing.html" class="sidebar-item" aria-label="js的运行原理"><!--[--><!--]--> js的运行原理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/neicun.html" class="sidebar-item" aria-label="JS 的内存管理 , 闭包"><!--[--><!--]--> JS 的内存管理 , 闭包 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/this.html" class="sidebar-item" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/hanshu.html" class="sidebar-item" aria-label="函数式编程"><!--[--><!--]--> 函数式编程 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/yuanxing.html" class="sidebar-item" aria-label="面向对象"><!--[--><!--]--> 面向对象 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/jicheng.html" class="sidebar-item" aria-label="面向对象 - 继承"><!--[--><!--]--> 面向对象 - 继承 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/lei.html" class="sidebar-item" aria-label="面向对象 - 类"><!--[--><!--]--> 面向对象 - 类 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es6.html" class="sidebar-item" aria-label="ES6 (一)"><!--[--><!--]--> ES6 (一) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es62.html" class="sidebar-item" aria-label="ES6 (二)"><!--[--><!--]--> ES6 (二) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/es789.html" class="sidebar-item" aria-label="ES6 +"><!--[--><!--]--> ES6 + <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/ppromise.html" class="sidebar-item" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/diedaiqi.html" class="sidebar-item" aria-label="Iterator - Generator"><!--[--><!--]--> Iterator - Generator <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/asyncawait.html" class="sidebar-item" aria-label="async - await"><!--[--><!--]--> async - await <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/eventloop.html" class="sidebar-item" aria-label="事件循环"><!--[--><!--]--> 事件循环 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/error.html" class="sidebar-item" aria-label="错误处理"><!--[--><!--]--> 错误处理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/mokuaihua.html" class="sidebar-item" aria-label="模块化"><!--[--><!--]--> 模块化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/json.html" class="sidebar-item" aria-label="JSON"><!--[--><!--]--> JSON <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/cunchu.html" class="sidebar-item" aria-label="数据存储"><!--[--><!--]--> 数据存储 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/dombom.html" class="sidebar-item" aria-label="BOM"><!--[--><!--]--> BOM <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/dom.html" class="sidebar-item" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/fangdoujieliu.html" class="sidebar-item" aria-label="手写防抖和节流"><!--[--><!--]--> 手写防抖和节流 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/digui.html" class="sidebar-item" aria-label="递归"><!--[--><!--]--> 递归 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/kuayu.html" class="sidebar-item" aria-label="跨域"><!--[--><!--]--> 跨域 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/shenkaobei.html" class="sidebar-item" aria-label="深拷贝 - 事件总线"><!--[--><!--]--> 深拷贝 - 事件总线 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/baoguanli.html" class="sidebar-item" aria-label="包管理工具"><!--[--><!--]--> 包管理工具 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/basic.html" class="sidebar-item" aria-label="基础知识"><!--[--><!--]--> 基础知识 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/array.html" class="sidebar-item" aria-label="数组"><!--[--><!--]--> 数组 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/reg2.html" class="sidebar-item" aria-label="正则表达式"><!--[--><!--]--> 正则表达式 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/JS/http.html" class="sidebar-item" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">TS系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/tsv2/start.html" class="sidebar-item" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/xijie.html" class="sidebar-item" aria-label="语法细节"><!--[--><!--]--> 语法细节 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/hanshu.html" class="sidebar-item" aria-label="函数类型"><!--[--><!--]--> 函数类型 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/tsv2/mianxiangduixiang.html" class="sidebar-item" aria-label="面向对象"><!--[--><!--]--> 面向对象 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">数据结构与算法 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/shujujiegou/start.html" class="sidebar-item" aria-label="栈, 队列, 链表"><!--[--><!--]--> 栈, 队列, 链表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start2.html" class="sidebar-item" aria-label="大O表示法, 哈希表"><!--[--><!--]--> 大O表示法, 哈希表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start3.html" class="sidebar-item" aria-label="树"><!--[--><!--]--> 树 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/shujujiegou/start4.html" class="sidebar-item" aria-label="图结构 (Graph)"><!--[--><!--]--> 图结构 (Graph) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">微信小程序系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/xiaochengxutixi/peizhi1.html" class="sidebar-item" aria-label="小程序的架构和配置"><!--[--><!--]--> 小程序的架构和配置 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/neizhizujian.html" class="sidebar-item" aria-label="小程序常见的内置组件"><!--[--><!--]--> 小程序常见的内置组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/yufa2.html" class="sidebar-item" aria-label="WXSS-WXML-WXS 语法"><!--[--><!--]--> WXSS-WXML-WXS 语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/shijian.html" class="sidebar-item" aria-label="小程序的事件处理"><!--[--><!--]--> 小程序的事件处理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/zujian.html" class="sidebar-item" aria-label="小程序的组件化开发"><!--[--><!--]--> 小程序的组件化开发 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/xiaochengxutixi/api.html" class="sidebar-item" aria-label="小程序系统 API 调用"><!--[--><!--]--> 小程序系统 API 调用 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Git系列 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/ggit/start.html" class="sidebar-item" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">uni-app <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/uni-app/start.html" class="sidebar-item" aria-label="创建项目"><!--[--><!--]--> 创建项目 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/uni-app/yufa.html" class="sidebar-item" aria-label="基础语法"><!--[--><!--]--> 基础语法 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/uni-app/gouwujie.html" class="sidebar-item" aria-label="购物街项目"><!--[--><!--]--> 购物街项目 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">uni-app项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/banlu/start.html" class="sidebar-item" aria-label="项目的搭建"><!--[--><!--]--> 项目的搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/denglu.html" class="sidebar-item" aria-label="微信一键登录"><!--[--><!--]--> 微信一键登录 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/fenxiang.html" class="sidebar-item" aria-label="微信分享和收藏"><!--[--><!--]--> 微信分享和收藏 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/daohangshouwei.html" class="sidebar-item" aria-label="导航守卫"><!--[--><!--]--> 导航守卫 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/fenbao.html" class="sidebar-item" aria-label="分包"><!--[--><!--]--> 分包 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/banlu/guige.html" class="sidebar-item" aria-label="微信支付 + 收货地址"><!--[--><!--]--> 微信支付 + 收货地址 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3+TS 后台 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/banluhoutai/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3前台项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/front/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/zujian.html" class="sidebar-item" aria-label="构建自己的组件库 - 实现前端设计"><!--[--><!--]--> 构建自己的组件库 - 实现前端设计 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/header.html" class="sidebar-item" aria-label="通用业务 Header 处理方案"><!--[--><!--]--> 通用业务 Header 处理方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/xiangyingshi.html" class="sidebar-item" aria-label="前中台响应式处理方案"><!--[--><!--]--> 前中台响应式处理方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/zhuti.html" class="sidebar-item" aria-label="主题替换解决方案"><!--[--><!--]--> 主题替换解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/changliebiao.html" class="sidebar-item" aria-label="长列表组件 infinite + 图片懒加载(自定义指令)"><!--[--><!--]--> 长列表组件 infinite + 图片懒加载(自定义指令) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/liandong.html" class="sidebar-item" aria-label="多组件联动与高阶组件解决方案"><!--[--><!--]--> 多组件联动与高阶组件解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/xiazai.html" class="sidebar-item" aria-label="前台常见功能解决方案：下载+全屏+引导"><!--[--><!--]--> 前台常见功能解决方案：下载+全屏+引导 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/luyou.html" class="sidebar-item" aria-label="高阶路由过渡处理方案 - 浏览器堆栈主动介入"><!--[--><!--]--> 高阶路由过渡处理方案 - 浏览器堆栈主动介入 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/biaodan.html" class="sidebar-item" aria-label="人类行为验证处理方案 - 脱离UI组件库实现登录、注册+表单校验"><!--[--><!--]--> 人类行为验证处理方案 - 脱离UI组件库实现登录、注册+表单校验 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/tupian.html" class="sidebar-item" aria-label="图片裁剪与上传处理方案 - 基于阿里云 OSS 处理用户资料"><!--[--><!--]--> 图片裁剪与上传处理方案 - 基于阿里云 OSS 处理用户资料 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/yidongduan.html" class="sidebar-item" aria-label="移动端路由切换解决方案  - 虚拟任务栈让 H5 丝滑"><!--[--><!--]--> 移动端路由切换解决方案  - 虚拟任务栈让 H5 丝滑 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/front/fankui.html" class="sidebar-item" aria-label="用户反馈解决方案 -- 兔小巢构建反馈功能"><!--[--><!--]--> 用户反馈解决方案 -- 兔小巢构建反馈功能 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3旅途项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/hongyuan/start.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/service.html" class="sidebar-item" aria-label="网络请求封装"><!--[--><!--]--> 网络请求封装 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/start2.html" class="sidebar-item" aria-label="业务 (1)"><!--[--><!--]--> 业务 (1) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/yewu2.html" class="sidebar-item" aria-label="业务 (2)"><!--[--><!--]--> 业务 (2) <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hongyuan/yewu3.html" class="sidebar-item" aria-label="业务 (3)"><!--[--><!--]--> 业务 (3) <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Vue3后台管理项目 <span class="down arrow"></span></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue-admin/dajian.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/denglu.html" class="sidebar-item" aria-label="登录"><!--[--><!--]--> 登录 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="项目架构之搭建 Layout架构 解决方案与实现"><!--[--><!--]--> 项目架构之搭建 Layout架构 解决方案与实现 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#前言" class="router-link-active router-link-exact-active sidebar-item" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#创建基于-layout-的基础架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建基于 Layout 的基础架构"><!--[--><!--]--> 创建基于 Layout 的基础架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#获取用户信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="获取用户信息"><!--[--><!--]--> 获取用户信息 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#渲染用户头像菜单" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染用户头像菜单"><!--[--><!--]--> 渲染用户头像菜单 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#退出登录方案实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="退出登录方案实现"><!--[--><!--]--> 退出登录方案实现 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#用户主动退出解决方案" class="router-link-active router-link-exact-active sidebar-item" aria-label="用户主动退出解决方案"><!--[--><!--]--> 用户主动退出解决方案 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#用户被动退出方案解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="用户被动退出方案解析"><!--[--><!--]--> 用户被动退出方案解析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#用户被动退出解决方案之-主动处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="用户被动退出解决方案之 - 主动处理"><!--[--><!--]--> 用户被动退出解决方案之 - 主动处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#用户被动退出解决方案之-被动处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="用户被动退出解决方案之 - 被动处理"><!--[--><!--]--> 用户被动退出解决方案之 - 被动处理 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#创建页面组件-使用临时-menu-菜单" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建页面组件，使用临时 menu 菜单"><!--[--><!--]--> 创建页面组件，使用临时 menu 菜单 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#动态-menu-菜单处理方案解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态 menu 菜单处理方案解析"><!--[--><!--]--> 动态 menu 菜单处理方案解析 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#生成项目页面组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="生成项目页面组件"><!--[--><!--]--> 生成项目页面组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#创建结构路由表" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建结构路由表"><!--[--><!--]--> 创建结构路由表 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#解析路由表-获取结构化数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="解析路由表, 获取结构化数据"><!--[--><!--]--> 解析路由表, 获取结构化数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#生成动态-menu-菜单" class="router-link-active router-link-exact-active sidebar-item" aria-label="生成动态 menu 菜单"><!--[--><!--]--> 生成动态 menu 菜单 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#修复最后残余问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="修复最后残余问题"><!--[--><!--]--> 修复最后残余问题 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#动画逻辑-左侧菜单伸缩功能实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="动画逻辑，左侧菜单伸缩功能实现"><!--[--><!--]--> 动画逻辑，左侧菜单伸缩功能实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#sidebarheader-处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="SidebarHeader 处理"><!--[--><!--]--> SidebarHeader 处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#全新-vue-能力-组件状态驱动的动态-css-值" class="router-link-active router-link-exact-active sidebar-item" aria-label="全新 vue 能力：组件状态驱动的动态 CSS 值"><!--[--><!--]--> 全新 vue 能力：组件状态驱动的动态 CSS 值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#动态面包屑方案分析" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态面包屑方案分析"><!--[--><!--]--> 动态面包屑方案分析 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#渲染基本的面包屑组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染基本的面包屑组件"><!--[--><!--]--> 渲染基本的面包屑组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#动态计算面包屑结构数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态计算面包屑结构数据"><!--[--><!--]--> 动态计算面包屑结构数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#vue3-动画处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="vue3 动画处理"><!--[--><!--]--> vue3 动画处理 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/myBlog-vp/vue-admin/layout.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/myBlog-vp/vue-admin/tongyong.html" class="sidebar-item" aria-label="通用功能开发"><!--[--><!--]--> 通用功能开发 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/mokuai.html" class="sidebar-item" aria-label="vue3+ElementPlus 基础模块实现"><!--[--><!--]--> vue3+ElementPlus 基础模块实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/yonghu.html" class="sidebar-item" aria-label="excel 、zip 与前端结合解决方案 - 用户管理页面实现"><!--[--><!--]--> excel 、zip 与前端结合解决方案 - 用户管理页面实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/quanxian.html" class="sidebar-item" aria-label="权限受控解决方案"><!--[--><!--]--> 权限受控解决方案 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/dongtaibiaoge.html" class="sidebar-item" aria-label="动态表格渲染方案 - 文章排名业务实现"><!--[--><!--]--> 动态表格渲染方案 - 文章排名业务实现 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue-admin/fuwenben.html" class="sidebar-item" aria-label="富文本和 markdown 之 创建文章"><!--[--><!--]--> 富文本和 markdown 之 创建文章 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">日常记账项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/jizhang/dajian.html" class="sidebar-item" aria-label="搭建"><!--[--><!--]--> 搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/jizhang/zujian.html" class="sidebar-item" aria-label="封装业务组件"><!--[--><!--]--> 封装业务组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/jizhang/yewu.html" class="sidebar-item" aria-label="业务功能"><!--[--><!--]--> 业务功能 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">基于Element Plus二次封装组件 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/fengzhuang/dajian.html" class="sidebar-item" aria-label="初级组件 上"><!--[--><!--]--> 初级组件 上 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/fengzhuang/chuxia.html" class="sidebar-item" aria-label="初级组件 - 下"><!--[--><!--]--> 初级组件 - 下 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/fengzhuang/zhongshang.html" class="sidebar-item" aria-label="中级组件"><!--[--><!--]--> 中级组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue2 UI <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue2ui/layout.html" class="sidebar-item" aria-label="Container 布局容器"><!--[--><!--]--> Container 布局容器 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue2ui/toast.html" class="sidebar-item" aria-label="Toast 轻提示"><!--[--><!--]--> Toast 轻提示 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue2ui/tabs.html" class="sidebar-item" aria-label="Tabs 标签页"><!--[--><!--]--> Tabs 标签页 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3 UI <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/vue3UI/start.html" class="sidebar-item" aria-label="使用 vite 搭建官网"><!--[--><!--]--> 使用 vite 搭建官网 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/switch.html" class="sidebar-item" aria-label="Switch 开关组件"><!--[--><!--]--> Switch 开关组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/dialog.html" class="sidebar-item" aria-label="Dialog 对话框组件"><!--[--><!--]--> Dialog 对话框组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/Tabs.html" class="sidebar-item" aria-label="Tabs 标签页组件"><!--[--><!--]--> Tabs 标签页组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/Tooltip.html" class="sidebar-item" aria-label="Tooltip 文字提示组件"><!--[--><!--]--> Tooltip 文字提示组件 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/vue3UI/build.html" class="sidebar-item" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">HRSaas项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/hrsass/start.html" class="sidebar-item" aria-label="项目搭建"><!--[--><!--]--> 项目搭建 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/login.html" class="sidebar-item" aria-label="登录模块"><!--[--><!--]--> 登录模块 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/zhuye.html" class="sidebar-item" aria-label="主页模块"><!--[--><!--]--> 主页模块 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/luyou.html" class="sidebar-item" aria-label="路由和页面"><!--[--><!--]--> 路由和页面 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/zuzhijiagou.html" class="sidebar-item" aria-label="组织架构"><!--[--><!--]--> 组织架构 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/gongsi.html" class="sidebar-item" aria-label="公司和角色"><!--[--><!--]--> 公司和角色 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/yuangong.html" class="sidebar-item" aria-label="员工管理"><!--[--><!--]--> 员工管理 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/tupian.html" class="sidebar-item" aria-label="图片上传预览及打印"><!--[--><!--]--> 图片上传预览及打印 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/quanxian.html" class="sidebar-item" aria-label="权限"><!--[--><!--]--> 权限 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/shouye.html" class="sidebar-item" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/tab.html" class="sidebar-item" aria-label="多语言tab页全屏主题"><!--[--><!--]--> 多语言tab页全屏主题 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/hrsass/bushu.html" class="sidebar-item" aria-label="部署"><!--[--><!--]--> 部署 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Vue3 + TS 后台管理项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/cms/code.html" class="sidebar-item" aria-label="项目搭建规范"><!--[--><!--]--> 项目搭建规范 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/axioos.html" class="sidebar-item" aria-label="axios的基本使用"><!--[--><!--]--> axios的基本使用 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/axiosF.html" class="sidebar-item" aria-label="axios 封装"><!--[--><!--]--> axios 封装 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/1.html" class="sidebar-item" aria-label="项目 1"><!--[--><!--]--> 项目 1 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/2.html" class="sidebar-item" aria-label="项目 2"><!--[--><!--]--> 项目 2 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/3.html" class="sidebar-item" aria-label="项目 3"><!--[--><!--]--> 项目 3 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/4.html" class="sidebar-item" aria-label="项目 4"><!--[--><!--]--> 项目 4 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/5.html" class="sidebar-item" aria-label="项目 5"><!--[--><!--]--> 项目 5 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/6.html" class="sidebar-item" aria-label="项目 6"><!--[--><!--]--> 项目 6 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/cms/7.html" class="sidebar-item" aria-label="/cms/7.md"><!--[--><!--]--> /cms/7.md <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">每日头条项目 <span class="right arrow"></span></p><!--[--><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/myBlog-vp/toutiao/chushihua.html" class="sidebar-item" aria-label="项目初始化"><!--[--><!--]--> 项目初始化 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/denglu.html" class="sidebar-item" aria-label="登录注册"><!--[--><!--]--> 登录注册 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/geren.html" class="sidebar-item" aria-label="个人中心"><!--[--><!--]--> 个人中心 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/wenzhang.html" class="sidebar-item" aria-label="首页 - 文章列表"><!--[--><!--]--> 首页 - 文章列表 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/pindao.html" class="sidebar-item" aria-label="首页 - 频道编辑"><!--[--><!--]--> 首页 - 频道编辑 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/sousuo.html" class="sidebar-item" aria-label="文章搜索"><!--[--><!--]--> 文章搜索 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/xiangqing.html" class="sidebar-item" aria-label="文章详情"><!--[--><!--]--> 文章详情 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/pinglun.html" class="sidebar-item" aria-label="文章评论"><!--[--><!--]--> 文章评论 <!--[--><!--]--></a><!----></li><li><a href="/myBlog-vp/toutiao/bianji.html" class="sidebar-item" aria-label="编辑资料"><!--[--><!--]--> 编辑资料 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="项目架构之搭建-layout架构-解决方案与实现" tabindex="-1"><a class="header-anchor" href="#项目架构之搭建-layout架构-解决方案与实现" aria-hidden="true">#</a> 项目架构之搭建 Layout架构 解决方案与实现</h1><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>layout 页面分为了三个部分，分别是：</p><ol><li>左侧的 <code>Menu</code> 菜单</li><li>顶部的 <code>NavBar</code></li><li>中间的内容区 <code>Main</code></li></ol><p>将会实现以下的核心解决方案：</p><ol><li>用户退出方案</li><li>动态侧边栏方案</li><li>动态面包屑方案</li></ol><p>除了这些核心内容之外，还有一些其他的小功能，比如：</p><ol><li>退出的通用逻辑封装</li><li>伸缩侧边栏动画</li><li><code>vue3</code> 动画</li><li>组件状态驱动的动态 <code>CSS</code> 值等等</li></ol><p>等等</p><h2 id="创建基于-layout-的基础架构" tabindex="-1"><a class="header-anchor" href="#创建基于-layout-的基础架构" aria-hidden="true">#</a> 创建基于 Layout 的基础架构</h2><p><img src="/myBlog-vp/assets/lot1.f5d17168.png" alt="图片"> 我们知道，当登录完成之后，那么我们会进入到 <code>Layout</code> 页面，这个 <code>Layout</code> 页面组件位于 <code>Layout/index.vue</code> 中，所以说想要实现这样的结构，那么我们就需要到对应的 <code>layout</code> 组件中进行。</p><ol><li><p>整个页面分为三部分，所以我们需要先去创建对应的三个组件：</p><ol><li><code>layout/components/Sidebar/index.vue</code></li><li><code>layout/components/Navbar.vue</code></li><li><code>layout/components/AppMain.vue</code></li></ol></li><li><p>然后在 <code>layout/index.vue</code> 中引入这三个组件</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> Navbar <span class="token keyword">from</span> <span class="token string">&#39;./components/Navbar&#39;</span>
    <span class="token keyword">import</span> Sidebar <span class="token keyword">from</span> <span class="token string">&#39;./components/Sidebar&#39;</span>
    <span class="token keyword">import</span> AppMain <span class="token keyword">from</span> <span class="token string">&#39;./components/AppMain&#39;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>完成对应的布局结构</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 左侧 menu --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sidebar</span>
      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>guide-sidebar<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sidebar-container<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fixed-header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 顶部的 navbar --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navbar</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 内容区 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-main</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li><li><p>在 <code>styles</code> 中创建如下 <code>css</code> 文件：</p><ol><li><code>variables.module.scss</code> ： 定义常量</li><li><code>mixin.scss</code> ：定义通用的 <code>css</code></li><li><code>sidebar.scss</code>：处理 <code>menu</code> 菜单的样式</li></ol></li><li><p>为 <code>variables.module.scss</code> ，定义如下常量并进行导出（ <code>:export</code> 可见 <a href="https://www.bluematador.com/blog/how-to-share-variables-between-js-and-sass" target="_blank" rel="noopener noreferrer">scss 与 js 共享变量<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>）：</p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">// sidebar</span>
<span class="token property"><span class="token variable">$menuText</span></span><span class="token punctuation">:</span> #bfcbd9<span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$menuActiveText</span></span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$subMenuActiveText</span></span><span class="token punctuation">:</span> #f4f4f5<span class="token punctuation">;</span>

<span class="token property"><span class="token variable">$menuBg</span></span><span class="token punctuation">:</span> #304156<span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$menuHover</span></span><span class="token punctuation">:</span> #263445<span class="token punctuation">;</span>

<span class="token property"><span class="token variable">$subMenuBg</span></span><span class="token punctuation">:</span> #1f2d3d<span class="token punctuation">;</span>
<span class="token property"><span class="token variable">$subMenuHover</span></span><span class="token punctuation">:</span> #001528<span class="token punctuation">;</span>

<span class="token property"><span class="token variable">$sideBarWidth</span></span><span class="token punctuation">:</span> 210px<span class="token punctuation">;</span>

<span class="token comment">// https://www.bluematador.com/blog/how-to-share-variables-between-js-and-sass</span>
<span class="token comment">// JS 与 scss 共享变量，在 scss 中通过 :export 进行导出，在 js 中可通过 ESM 进行导入</span>
<span class="token selector">:export </span><span class="token punctuation">{</span>
  <span class="token property">menuText</span><span class="token punctuation">:</span> <span class="token variable">$menuText</span><span class="token punctuation">;</span>
  <span class="token property">menuActiveText</span><span class="token punctuation">:</span> <span class="token variable">$menuActiveText</span><span class="token punctuation">;</span>
  <span class="token property">subMenuActiveText</span><span class="token punctuation">:</span> <span class="token variable">$subMenuActiveText</span><span class="token punctuation">;</span>
  <span class="token property">menuBg</span><span class="token punctuation">:</span> <span class="token variable">$menuBg</span><span class="token punctuation">;</span>
  <span class="token property">menuHover</span><span class="token punctuation">:</span> <span class="token variable">$menuHover</span><span class="token punctuation">;</span>
  <span class="token property">subMenuBg</span><span class="token punctuation">:</span> <span class="token variable">$subMenuBg</span><span class="token punctuation">;</span>
  <span class="token property">subMenuHover</span><span class="token punctuation">:</span> <span class="token variable">$subMenuHover</span><span class="token punctuation">;</span>
  <span class="token property">sideBarWidth</span><span class="token punctuation">:</span> <span class="token variable">$sideBarWidth</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></li><li><p>为 <code>mixin.scss</code> 定义如下样式：</p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token keyword">@mixin</span> <span class="token selector">clearfix </span><span class="token punctuation">{</span>
  <span class="token selector"><span class="token parent important">&amp;</span>:after </span><span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">@mixin</span> <span class="token selector">scrollBar </span><span class="token punctuation">{</span>
  <span class="token selector"><span class="token parent important">&amp;</span>::-webkit-scrollbar-track-piece </span><span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d3dce6<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector"><span class="token parent important">&amp;</span>::-webkit-scrollbar </span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector"><span class="token parent important">&amp;</span>::-webkit-scrollbar-thumb </span><span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #99a9bf<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">@mixin</span> <span class="token selector">relative </span><span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></li><li><p>为 <code>sidebar.scss</code> 定义如下样式：</p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">#app </span><span class="token punctuation">{</span>
  <span class="token selector">.main-container </span><span class="token punctuation">{</span>
    <span class="token property">min-height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> margin-left 0.28s<span class="token punctuation">;</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token variable">$sideBarWidth</span><span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.sidebar-container </span><span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> width 0.28s<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">$sideBarWidth</span> <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 1001<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>

    <span class="token comment">// 重置 element-plus 的css</span>
    <span class="token selector">.horizontal-collapse-transition </span><span class="token punctuation">{</span>
      <span class="token property">transition</span><span class="token punctuation">:</span> 0s width ease-in-out<span class="token punctuation">,</span> 0s padding-left ease-in-out<span class="token punctuation">,</span>
        0s padding-right ease-in-out<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.scrollbar-wrapper </span><span class="token punctuation">{</span>
      <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.el-scrollbar__bar.is-vertical </span><span class="token punctuation">{</span>
      <span class="token property">right</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.el-scrollbar </span><span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector"><span class="token parent important">&amp;</span>.has-logo </span><span class="token punctuation">{</span>
      <span class="token selector">.el-scrollbar </span><span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% <span class="token operator">-</span> 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.is-horizontal </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">a </span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.svg-icon </span><span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.sub-el-icon </span><span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> -2px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.el-menu </span><span class="token punctuation">{</span>
      <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100% <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.is-active &gt; .el-submenu__title </span><span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">$subMenuActiveText</span> <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector"><span class="token parent important">&amp;</span> .nest-menu .el-submenu &gt; .el-submenu__title,
    <span class="token parent important">&amp;</span> .el-submenu .el-menu-item </span><span class="token punctuation">{</span>
      <span class="token property">min-width</span><span class="token punctuation">:</span> <span class="token variable">$sideBarWidth</span> <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.hideSidebar </span><span class="token punctuation">{</span>
    <span class="token selector">.sidebar-container </span><span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 54px <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.main-container </span><span class="token punctuation">{</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> 54px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.submenu-title-noDropdown </span><span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>

      <span class="token selector">.el-tooltip </span><span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>

        <span class="token selector">.svg-icon </span><span class="token punctuation">{</span>
          <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.sub-el-icon </span><span class="token punctuation">{</span>
          <span class="token property">margin-left</span><span class="token punctuation">:</span> 19px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.el-submenu </span><span class="token punctuation">{</span>
      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>

      <span class="token selector"><span class="token parent important">&amp;</span> &gt; .el-submenu__title </span><span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>

        <span class="token selector">.svg-icon </span><span class="token punctuation">{</span>
          <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.sub-el-icon </span><span class="token punctuation">{</span>
          <span class="token property">margin-left</span><span class="token punctuation">:</span> 19px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token selector">.el-submenu__icon-arrow </span><span class="token punctuation">{</span>
          <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token selector">.el-menu--collapse </span><span class="token punctuation">{</span>
      <span class="token selector">.el-submenu </span><span class="token punctuation">{</span>
        <span class="token selector"><span class="token parent important">&amp;</span> &gt; .el-submenu__title </span><span class="token punctuation">{</span>
          <span class="token selector"><span class="token parent important">&amp;</span> &gt; span </span><span class="token punctuation">{</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.el-menu--collapse .el-menu .el-submenu </span><span class="token punctuation">{</span>
    <span class="token property">min-width</span><span class="token punctuation">:</span> <span class="token variable">$sideBarWidth</span> <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.withoutAnimation </span><span class="token punctuation">{</span>
    <span class="token selector">.main-container,
    .sidebar-container </span><span class="token punctuation">{</span>
      <span class="token property">transition</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.el-menu--vertical </span><span class="token punctuation">{</span>
  <span class="token selector"><span class="token parent important">&amp;</span> &gt; .el-menu </span><span class="token punctuation">{</span>
    <span class="token selector">.svg-icon </span><span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.sub-el-icon </span><span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> -2px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 菜单项过长时</span>
  <span class="token selector">&gt; .el-menu--popup </span><span class="token punctuation">{</span>
    <span class="token property">max-height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
    <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>

    <span class="token selector"><span class="token parent important">&amp;</span>::-webkit-scrollbar-track-piece </span><span class="token punctuation">{</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #d3dce6<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector"><span class="token parent important">&amp;</span>::-webkit-scrollbar </span><span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector"><span class="token parent important">&amp;</span>::-webkit-scrollbar-thumb </span><span class="token punctuation">{</span>
      <span class="token property">background</span><span class="token punctuation">:</span> #99a9bf<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br></div></div></li><li><p>在 <code>index.scss</code> 中按照顺序导入以上样式文件</p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token keyword">@import</span> <span class="token string">&#39;./variables.module.scss&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&#39;./mixin.scss&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">@import</span> <span class="token string">&#39;./sidebar.scss&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>在 <code>layout/index.vue</code> 中写入如下样式</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">&#39;~@/styles/mixin.scss&#39;</span><span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">&#39;~@/styles/variables.module.scss&#39;</span><span class="token punctuation">;</span></span>

<span class="token selector">.app-wrapper</span> <span class="token punctuation">{</span>
  <span class="token atrule"><span class="token rule">@include</span> clearfix<span class="token punctuation">;</span></span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.fixed-header</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 9<span class="token punctuation">;</span>
  <span class="token selector">width: calc(100% - #</span><span class="token punctuation">{</span>$sideBarWidth<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li><li><p>因为将来要实现 <strong>主题更换</strong>，所以为 <code>sidebar</code> 赋值动态的背景颜色</p></li></ol><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
...
    <span class="token comment">&lt;!-- 左侧 menu --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sidebar</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sidebar-container<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: variables.menuBg }<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> variables <span class="token keyword">from</span> <span class="token string">&#39;@/styles/variables.module.scss&#39;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="11"><li>为 <code>Navbar</code>、<code>Sidebar</code>、<code>AppMain</code> 组件进行初始化代码</li></ol><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Navbar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="12"><li>至此查看效果为 <img src="/myBlog-vp/assets/an1.62a95e61.png" alt="图片"></li><li>可见 <code>Navbar</code> 与 <code>AppMain</code> 重叠</li><li>为 <code>AppMain</code> 进行样式处理</li></ol><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>组件名<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.app-main</span> <span class="token punctuation">{</span>
  <span class="token comment">/*浏览器可是区域 100vh*/</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 61px 20px 20px 20px<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><ol start="15"><li>查看效果 <img src="/myBlog-vp/assets/an2.e5f772f1.png" alt="图片"></li></ol><p>下一步去实现一下 <code>navbar</code> 中的功能操作</p><h2 id="获取用户信息" tabindex="-1"><a class="header-anchor" href="#获取用户信息" aria-hidden="true">#</a> 获取用户信息</h2><p>接下来我们实现一下 <code>navbar</code> 中的 <strong>头像菜单</strong> 功能</p><p><img src="/myBlog-vp/assets/uy1.ec5993e2.png" alt="图片"></p><p>这样的一个功能主要分为三个部分：</p><ol><li>获取并展示用户信息</li><li><code>element-plus</code> 中的 <code>dropdown</code> 组件使用</li><li>退出登录的方案实现</li></ol><p>现在就实现第一部分的功能 <strong>获取并展示用户信息</strong></p><p><strong>获取并展示用户信息</strong> 我们把它分为三部分进行实现：</p><ol><li>定义接口请求方法</li><li>定义调用接口的动作</li><li>在<strong>权限拦截时</strong>触发动作</li></ol><p>那么接下来我们就根据这三个步骤，分别来进行实现：</p><p><strong>定义接口请求方法：</strong></p><p>在 <code>api/sys.js</code> 中定义如下方法：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 获取用户信息</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;/sys/profile&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>因为获取用户信息需要对应的 <code>token</code> ，所以我们可以利用 <code>axios</code> 的 <strong>请求拦截器</strong> 对 <code>token</code> 进行统一注入，在 <code>utils/request.js</code> 中写入如下代码： <img src="/myBlog-vp/assets/ttoo1.e8f4ad55.png" alt="图片"></p><p><strong>定义调用接口的动作：</strong></p><p>在 <code>store/modules/user</code> 中写入以下代码：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> login<span class="token punctuation">,</span> getUserInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/sys&#39;</span>
<span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>
      <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">setUserInfo</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> userInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> userInfo
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token operator">...</span>
    <span class="token keyword">async</span> <span class="token function">getUserInfoAction</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;setUserInfo&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
      <span class="token keyword">return</span> res
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>在权限拦截时触发动作：</strong><img src="/myBlog-vp/assets/ttoo2.2ccf0f6c.png" alt="图片"></p><p>但先在 <code>store/getters.js</code> 中写入判断是否有用户信息代码： <img src="/myBlog-vp/assets/ttoo3.d480ffd5.png" alt="图片"></p><h2 id="渲染用户头像菜单" tabindex="-1"><a class="header-anchor" href="#渲染用户头像菜单" aria-hidden="true">#</a> 渲染用户头像菜单</h2><p>到现在已经拿到了 <strong>用户数据，并且在 <code>getters</code> 中做了对应的快捷访问</strong> ，那么接下来我们就可以根据数据渲染出 <strong>用户头像内容</strong></p><p>渲染用户头像，我们将使用到 <code>element-plus</code> 的两个组件：</p><ol><li><code>avatar</code></li><li><code>Dropdown</code></li></ol><p>在 <code>layout/components/navbar.js</code> 中实现以下代码</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right-menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 头像 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dropdown</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar-container<span class="token punctuation">&quot;</span></span> <span class="token attr-name">trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>click<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>avatar-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-avatar</span>
            <span class="token attr-name">shape</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>square<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>40<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$store.getters.userInfo.avatar<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-avatar</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tools</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#dropdown</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dropdown-menu</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user-dropdown<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dropdown-item</span><span class="token punctuation">&gt;</span></span> 首页 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dropdown-item</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dropdown-item</span> <span class="token attr-name">divided</span><span class="token punctuation">&gt;</span></span> 退出登录 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dropdown-item</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dropdown-menu</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dropdown</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.navbar</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 1px 4px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 21<span class="token punctuation">,</span> 41<span class="token punctuation">,</span> 0.08<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token selector">.right-menu</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
    <span class="token property">padding-right</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>

    <span class="token selector">::v-deep .avatar-container</span> <span class="token punctuation">{</span>
      <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
      <span class="token selector">.avatar-wrapper</span> <span class="token punctuation">{</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token selector">.el-avatar</span> <span class="token punctuation">{</span>
          <span class="token property">--el-avatar-background-color</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
          <span class="token property">margin-right</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h2 id="退出登录方案实现" tabindex="-1"><a class="header-anchor" href="#退出登录方案实现" aria-hidden="true">#</a> 退出登录方案实现</h2><p><strong>退出登录</strong> 一直是一个通用的前端实现方案，对于退出登录而言，它的触发时机一般有两种：</p><ol><li>用户<strong>主动</strong>退出</li><li>用户<strong>被动</strong>退出</li></ol><p>其中：</p><ol><li>主动退出指：用户点击登录按钮之后退出</li><li>被动退出指：<code>token</code> 过期或 单用户登录(被其他人”顶下来“) 时退出</li></ol><p>那么无论是什么退出方式，在用户退出时，所需要执行的操作都是固定的：</p><ol><li>清理掉当前用户缓存数据</li><li>清理掉权限相关配置</li><li>返回到登录页</li></ol><p>那么明确好了对应的方案之后，接下来咱们就先来实现 <strong>用户主动退出的对应策略</strong></p><h3 id="用户主动退出解决方案" tabindex="-1"><a class="header-anchor" href="#用户主动退出解决方案" aria-hidden="true">#</a> 用户主动退出解决方案</h3><p>在 <code>store/modules/user.js</code> 中，添加对应 <code>action</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">logoutAction</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;setToken&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
      context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;setUserInfo&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      storage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// TODO : 清理掉权限相关配置</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>为退出登录按钮添加点击事件，触发 <code>logout</code> 的 <code>action</code></p><p><img src="/myBlog-vp/assets/ou1.17d9307f.png" alt="图片"><img src="/myBlog-vp/assets/ou2.db2bd116.png" alt="图片"></p><p>完成了 <strong>用户主动退出</strong> 对应的实现</p><h3 id="用户被动退出方案解析" tabindex="-1"><a class="header-anchor" href="#用户被动退出方案解析" aria-hidden="true">#</a> 用户被动退出方案解析</h3><p>在上面实现了 <strong>用户主动退出</strong> 场景，同时也提到 <strong>用户被动退出</strong> 的场景主要有两个：</p><ol><li><code>token</code> 失效</li><li>单用户登录：其他人登录该账号被 “顶下来”</li></ol><p>那么这两种场景下，在前端对应的处理方案一共也分为两种，共分为 <strong>主动处理</strong> 、<strong>被动处理</strong> 两种 ：</p><ol><li>主动处理：主要应对 <code>token</code> 失效</li><li>被动处理：同时应对 <code>token</code> 失效 与 <strong>单用户登录</strong></li></ol><p>这两种方案基本上就覆盖了用户被动推出时的主要业务场景了</p><p>主要分析了 <strong>用户被动退出</strong> 的场景，那么从下面开始，分别来实现这两种处理方案</p><h3 id="用户被动退出解决方案之-主动处理" tabindex="-1"><a class="header-anchor" href="#用户被动退出解决方案之-主动处理" aria-hidden="true">#</a> 用户被动退出解决方案之 - 主动处理</h3><p>有时效的，这个大家都知道。但是通常情况下，这个时效都是在服务端进行处理。而此时我们要在 <strong>服务端处理 <code>token</code> 时效的同时，在前端主动介入 <code>token</code> 时效的处理</strong>。 从而保证用户信息的更加安全性。</p><p>那么对应到我们代码中的实现方案为：</p><ol><li>在用户登陆时，记录当前 <strong>登录时间</strong></li><li>制定一个 <strong>失效时长</strong></li><li>在接口调用时，根据 <strong>当前时间</strong> 对比 <strong>登录时间</strong> ，看是否超过了 <strong>时效时长</strong><ol><li>如果未超过，则正常进行后续操作</li><li>如果超过，则进行 <strong>退出登录</strong> 操作</li></ol></li></ol><p>那么明确好了对应的方案之后，接下来就去实现对应代码</p><ol><li>创建 <code>utils/auth.js</code> 文件，并写入以下代码：</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> storage <span class="token keyword">from</span> <span class="token string">&#39;./storage&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">TIME_STAMP</span><span class="token punctuation">,</span> <span class="token constant">TOKEN_TIMEOUT_VALUE</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/constant&#39;</span>

<span class="token comment">// 获取 时间戳</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getTimeStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> storage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">TIME_STAMP</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 设置时间戳</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setTimeStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  storage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token constant">TIME_STAMP</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 判断是否超时 true / false</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">isCheckTImeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当前时间</span>
  <span class="token keyword">const</span> currentTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">// 之前存的 时间戳</span>
  <span class="token keyword">const</span> timeStamp <span class="token operator">=</span> storage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token constant">TIME_STAMP</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> currentTime <span class="token operator">-</span> timeStamp <span class="token operator">&gt;</span> <span class="token constant">TOKEN_TIMEOUT_VALUE</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>事先在 <code>constant</code> 中声明对应常量：</p><p><img src="/myBlog-vp/assets/ts1.9fc6b336.png" alt="图片"></p><ol start="2"><li>在用户登录成功之后去<strong>设置时间</strong>，到 <code>store/user.js</code> 的 <code>login</code> 中：</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> setTimeStamp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/auth&#39;</span>
<span class="token operator">...</span><span class="token punctuation">{</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">}</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">loginAction</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> userInfo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> userInfo
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          username<span class="token punctuation">,</span>
          <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token function">md5</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;setToken&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>token<span class="token punctuation">)</span>
            ElMessage<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&#39;登录成功&#39;</span><span class="token punctuation">)</span>
            <span class="token comment">// 登录后操作: 跳转</span>
            router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span>
            <span class="token comment">// 设置登录时时间戳</span>
            <span class="token function">setTimeStamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ol start="3"><li>在 <code>utils/request</code> 对应的 <strong>请求拦截器</strong> 中进行 <strong>主动介入</strong></li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdQAAAAeCAIAAAAaQXhdAAAACXBIWXMAABJ0AAASdAHeZh94AAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAA1vSURBVHic7Z1RTNvWGsf/u7oPa5yW0tWm6QYhES1tkzWMMtMhtMFQlD6AdKUgMamdRJFAQhUTPFQX9YmnKld7oFp1hUSltNJ6pyE10qTyAIpa6BVibba1ZUvWsSIocDtK3EKBnLSP9yG24wQnhMRJ6HZ+T4mPffzFHP/9+X8+m7eOWKtAoVAolNzyt3wHQKFQKH9FqPhSKBRKHqDiS6FQKHmAii+FQqHkASq+FAqFkgeo+FIoFEoe+PvWq+h7/133wS7MjQ73DmU/oNxQ+8mxLtvbwOsH3/7qCqa8mc7o4c0MhNFxf79GkfRY6h3M7BXfvEejDiUYF89XEP+pgKBxx28gaf65Y2k5MeQwSF+Wbrb9dF2j6NKGcw7YihH0dk4FNjc227obuMjHxVtez40EfTTbuhuYqWuTY/c0CYmp/7LGpt+8R3E5AIBktLtq09nWsvUkv0gjLBfs9sKZ/5yfS3L+sJ01p48zaz9PXh0gaewiBfHdeZw85O4oD6Z/MbCau2x48O39tM9DSn7QGT28+YV/rOP59rabuPPrxB3UfnKs67NjvWnpb8uJIYeB/DLe1h/a9ra5h+2sOX2ceDu9AQDgnAN2J9TVynKYw+JU6lIo9awm98kgY+e9YxC1fnubxgVQaSgIzQxrpby5knJVUhDfkOvccPYDySGfl+3Fwmw6yhued47Pp7dTp5FvN8nDTsvcefswLp6v0Km1CP5TAUFK8NWa3mQm7vzRZDMXcsC2//RnjhqApds7THnJSgjFWI//Nc22WH0Mem4FuxtslhubFLPaxBdj8ZaGOYgkstmC+/g4s/ZzcIcMREEgALMupJP24g3NfDPj7XcLgdVc7jEiduShb6w3HFnCDlpY5E3LSK9POkH2W0esuoc+nxQYgOg1xmnk203hvF4ntId7523gdRobvlp/onUs2YCpr+bWfp6M0dkbS4sNZVw1ArEZLltpKEDQl4+kL02aDcUgU/fTFLudRlLxFd1eAEDoweC4625M0+GZ8dsFdU0lIL+Mt/1RPuQwRFdrOTHkwM226ffkHhZ+bOl7lqDzGEO5tqeu6/2NmG1fTV8+93gCONPX2FQirmZyNA45VDbPDspkMKxq0bKDdVYpNqKUM6fRUqEjsQIndMQlIYr+F+Jvq5U9b06ZlWksiZfRTZ2QOZ9zPpOxy7h4/tCyb0LPO1iQOZ+TmEasbOyuk4eU8EDF298Kk6HHUu9gpQis9SNSX5uOVY4509fYxE5fPrfR6K4yiSHFjnOlUywN461Pn9RQSzOruVJ90BdvQZKVEFNayeCecnkki1Smw5xzwLZH4WAqTIaIvxyBsQ/Y7eJn2XHO1NW1XLDbpR0kcFGZ+mo1k6TadLa1rED6pcpdx/u2CpNBubuCBnt3g/g53q1WdK5ind+YupTBpSup+EqGQ8uJIcdulfayqk9nxi//UtVVVuV+f+Nm249Wd9Xhj/S4G7k7MzS5DeSX8Zb+EE4ecndUuXsky+zkIXdHOSMP05YTQ45G90GloabYFgdc7qquvo2JvmfX+4avI3PPNw2kZLDHUu9Q8azYwTprSfTGnB3kjU5RRJgPixiEZ39Q10QAgM7czot5sdPIt1utPbLC6owe3ow536l5Iu69zorYViY8e2Vc3JfLYnQGEl0YtPM6iiy1y74rIUt7kcWjC4+O+4/WWQ+xDOZJ9FD4BERyZ553yQq73zpiZYn0c5xGvp2vH0xBQPsDY/1I3/NNl9qeuq739dK38i53eRcAIMb83VXe5cbc6HDLEOLG+Zm+xqaS0IPBYdddRAS3y72nVJ6p2+L0SQu20lCwOBNAvGr8torSuFW3l0UGPZ1eJPN8M3J1LRfs9uLozKHlQk199Sb5ruZK9Vi8F2eScM5mDHd6Bbmf1hpga+kPXPTKRymh56svO91Kpq55x+6B7aw5rWrdZEAmpWbMrg3RBdulD46KQ4opkAerYozefXx7AUyZoRYAcOZUOfNq+rKcIAz9dHMBzPvlZxSdz40OS+P7mX8BYHfXZhBqltHp3gEWlmUbQeiIpm/7D+lAlp8nLWaIJoAeYZmAPbpfbOgxmZnw7DdSrtof8C+ArTUyylZFGk56VZSXcfGaKi/A6MITkZB0zAu/2C2j1wFwGk0lEEYlR8UzH3gYZipMrBiJmYXgl1Nvz3zgYRglZqNTo8C24vXqxrbWn+gfb2kbbmkbvrkAvJq+3DYc+Ro77RZ6MCjlAXeXfn8lnQInD31agrlROZMNub6eJjB82iOeIFuePunAFTJrqwTgnK1l67e8l67NrIGsLKqsaTnMYXFGoyKHDGG4QmBxSda1wEUV9YxMtf03XiWDHkVBQuDWzBqY0sqM5vQURPNo4f7SGrgjzRp1DCDDOt+Fp1K1TeilyjxU6Pfvo2P0yVoIu/aUAsABawkgbEwoVr3+aAnY/d7J6LbKDq/3DbeI92uZw+0t340nMy+16S1COPwCKLHWD+7fel21zZcT5MXsUTZOuMMrYVHm1Fo3o3PxfIVO6/k9YVnqjazERM58WMQoWgGQZQIwOiek61BIuQH5YZlAt7sEueH101XobAc/17bXjf9FjYKQ69xw5H6u9qN3mbjzQinN2PL0SQeGK8S6QNBsKEbwtxtA8Z4CkOBmhY1Mtf2+Q8p9SHAVKLZ1X+ASr8N9fJxZm91qqu0eWdcwrtCSP5sXp3xNuJG1zfdW+r1GIGXDa/twB65+dlC38cflr+5rJOQyQse4z8XzFaIdmcR73Q463TsAY+JHTLHLSbT1BUl628iaKwCENxYyjiU1dPt0gM46Uhe7WHEo1ALWFeli1skeX393/2vuwNUvKhvxcvir2a+zvT+lLkuwu2uRraoJZp+erCzC0sAhNBMEWJZBaCkIxKmaxgVbGRO46A121pw+buseAFQ932ZDMYJetXLaSLGtcslaFiPVkp1U7aDZ9T8BwWdnv3oG7sDVLyqbbt//p1/b3qUSAp3Rw5srZKMzkhQX7XfOk20/RhEOvwCQaIosHH4BvMMweJ5YfwX/qTmdhze384D2z3GoxLQSRsm2n+wIL+dEeQF8/o/KxsJsXH23gbAxAWTfQ1slAmApjKqSoiJqZxVsRRAGJi8B4sTd8ZqznUr9FafaNvutEeVVTIVxzgHbnhyFnCm5erxYX1uml+6znvkV/m+EM0cNePV0IsW09+5GEOAOpueOBV9Ob6C0bG9aG6dAeN7pmyVg9onT/cIjAdAVfahaV7tVXwqTIUFr0f4tDNPwvNMvQGdut7DJV9QChcmgEsnzx2GUFCnD2GxTRHGyRfHWnXy9SZO91hKEZ1/mRHknvn9KYLC2KBadNBzehblHzxJukxVWiQCGK1Q4v82GYpAnW0+1MdbN1d4CARiuWvMoZcjY+cmpEAoUlw1xqk3FJGGsZgYqRrA6bKWhIG7RPbIO7GG18oi3R27Et7an6oNdoQcj4rC7PjJNdpW3STMPaDnRVIK5/6bu6oZevoqfoMsr+60eY/Tv52SLGIUZ2h/wL4Cp4HlXVEXZwZSkkPTOCmBjOo9vjVFVxmVRm7x67r8yRxL3oyX9c7MkodCLP0d2xsUiPGm+ZCFE5KtU7DMpMuGVMBiTqSc7wWvL3ce3F2BynJBGqb7383Lm1fRwjkp0Chm22sRHqqmquVLI9mUki1SdaiMrIRSYOTayWrR0TMHi+hoYW0MSczYNOOeXpuiIqeZK9VhbjV4bLA1lalNtEM1ivcEauRhUm85G6+EAILhK5NbN7kSkh5UQCo6XWTT6Jdsime0QKQiTvn3Q0TjUoaxV3BK9uAkQ/yz83cdtgLujbsgd+S6X46RIyHXuR5e7qsnd2AQgB3W+sVpgbq8ztytrZp/7v2H4kbpED7AJHeNjPZZ6By8XqAqj46m5Hs/9p3xGD6+0fRWGstgqe6zkoc+n6i145n0l+nqHiR/Rp+AJxDzhxjjq6h1I+Qm38LxzPDxYF2P7Rqtxn/tP+a0j1pjjIB8oMcjIUQrPXhkPO+qssb2TXp9/sM4qhpT/Ot/kXO8bRl+jPEo3lbprD1kJMfuKMXZrhm8tO90a9F6b4Vtt3a1k6tqkVOuqWrAlbj52fmrfgO30QBmAtZ8nLwllcgGsyL25q8V7uhtEczZa5xtTbAtbq93WCoSkGtvkrQh6bpjODtjlFWIrarkjxUhkkgQuTnJf1ogdIujtnDqisB2EgUnvBbtd3l0n+XjApvqT5crlZO/B0Jq3svQ/3FpODDl2b6tiPGe83Xv22Aersy3faVrwQHkD2PuvL8zc1K9n76TzhNsbgeWCnV9N9p4XtrPmtHkp+ftidhbNtu4GbP9tEm8Af8FXSr5+mtNniymU3BH4PZj0Jjq1gq0dRMQkWfrzKS/+kuKLudXXKDnYq61tRdnx1H5ysBSvpx/9adNeALgxMxXi7AoL1XKhpj46Pxb0dHrTe/9hniBj572XLu6QemSN2UmlZrli4s6vwLGuzyqHMnvBK+VNQXqfL57c/tO/R5SMnZ/ElzUR3xYAFqcu7YjH2CjxZMvzpVAoFEoS/oq2A4VCoeQdKr4UCoWSB6j4UigUSh6g4kuhUCh5gIovhUKh5IH/Axsvq7p0obefAAAAAElFTkSuQmCC" alt="图片"><img src="/myBlog-vp/assets/jieru1.75a8c434.png" alt="图片"></p><p>至此就完成了 <strong>主动处理</strong> token 失效的 业务逻辑</p><h3 id="用户被动退出解决方案之-被动处理" tabindex="-1"><a class="header-anchor" href="#用户被动退出解决方案之-被动处理" aria-hidden="true">#</a> 用户被动退出解决方案之 - 被动处理</h3><p>在上面处理了 <strong>用户被动退出时的 - 主动处理</strong> ，那么在现去处理 <strong>用户被动退出时的被动处理</strong> 。</p><p>还是和上一小节一样，我们还是先明确背景，然后再来明确业务逻辑。</p><p><strong>背景：</strong></p><p>首先我们需要先明确 <strong>被动处理</strong> 需要应对两种业务场景：</p><ol><li><code>token</code> 过期</li><li>单用户登录</li></ol><p>然后我们一个一个来去看，首先是 <code>token</code> 过期</p><blockquote><p>我们知道对于 <code>token</code> 而言，本身就是具备时效的，这个是在服务端生成 <code>token</code> 时就已经确定的。</p><p>而此时我们所谓的 <code>token</code> 过期指的就是：</p><p><strong>服务端生成的 <code>token</code> 超过 服务端指定时效</strong> 的过程</p></blockquote><p>而对于 单用户登录 而言，指的是：</p><blockquote><p>当用户 A 登录之后，<code>token</code> 过期之前。</p><p>用户 A 的账号在其他的设备中进行了二次登录，导致第一次登录的 A 账号被 “顶下来” 的过程。</p><p>即：<strong>同一账户仅可以在一个设备中保持在线状态</strong></p></blockquote><p>那么明确好了对应的背景之后，接下来我们来看对应的业务处理场景：</p><p>从背景中我们知道，以上的两种情况，都是在 <strong>服务端进行判断的</strong>，而对于前端而言其实是 <strong>服务端通知前端的一个过程。</strong></p><p>所以说对于其业务处理，将遵循以下逻辑：</p><ol><li>服务端返回数据时，会通过特定的状态码通知前端</li><li>当前端接收到特定状态码时，表示遇到了特定状态：<strong><code>token</code> 时效</strong> 或 <strong>单用户登录</strong></li><li>此时进行 <strong>退出登录</strong> 处理</li></ol><p>但是这里需要注意，因为这次项目，<strong>同一个账号需要在多个设备中使用</strong>，所以这个项目没有指定 <strong>单用户登录</strong> 的状态码，仅有 <strong><code>token</code> 失效</strong> 状态码。之后当需要到 <strong>单用户登录</strong> 时，只需要增加一个状态码判断即可</p><p>明确好了业务逻辑之后，接下来来实现对应代码：</p><p>在 <code>utils/request</code> 的 <strong>响应拦截器</strong> 中，增加以下逻辑：</p><p><img src="/myBlog-vp/assets/ttoo5.e5ff8057.png" alt="图片"></p><p>那么至此，就已经完成了 <strong>整个用户退出</strong> 方案</p><h2 id="创建页面组件-使用临时-menu-菜单" tabindex="-1"><a class="header-anchor" href="#创建页面组件-使用临时-menu-菜单" aria-hidden="true">#</a> 创建页面组件，使用临时 menu 菜单</h2><p>处理完了 <strong>退出登录</strong> 之后，接下来处理 <strong>动态<code>menu</code>菜单</strong></p><p>这里先生成一个临时的 <code>menu</code> 菜单</p><ol><li>创建 <code>layout/Sidebar/SidebarMenu.vue</code> 文件</li></ol><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu</span>
    <span class="token attr-name">:uniqueOpened</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">default-active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">background-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#545c64<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#fff<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">active-text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#ffd04b<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>导航 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>document</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>导航 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>导航 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-sub-menu</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>导航4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>导航 4 - 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>4-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>导航 4 - 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-sub-menu</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><ol start="2"><li>在 <code>layout/Sidebar/index</code> 中导入该组件</li></ol><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>占位<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-scrollbar</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sidebar-menu</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sidebar-menu</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-scrollbar</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> SidebarMenu <span class="token keyword">from</span> <span class="token string">&#39;./SidebarMenu.vue&#39;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>至此生成了一个临时的 <code>menu</code> 菜单，从这个临时的 <code>menu</code> 菜单出可以看到，<code>el-menu</code> 其实分成了三个部分：</p><ol><li><code>el-menu</code>：整个 <code>menu</code> 菜单</li><li><code>el-submenu</code>：子集 <code>menu</code> 菜单</li><li><code>el-menu-item</code>：具体菜单项</li></ol><p>那么明确好了这些内容之后，接下来就可以来去分析一下 <strong>动态 <code>menu</code> 菜单如何生成</strong></p><h2 id="动态-menu-菜单处理方案解析" tabindex="-1"><a class="header-anchor" href="#动态-menu-菜单处理方案解析" aria-hidden="true">#</a> 动态 menu 菜单处理方案解析</h2><p>上面处理了 <strong>静态 <code>menu</code></strong>，那么接下来去处理 <strong>动态 <code>menu</code> 菜单</strong></p><p>其实 <strong>动态<code>menu</code>菜单</strong> 其实主要是和 <strong>动态路由表</strong> 配合来去实现 <strong>用户权限</strong> 的</p><p>但是 <strong>用户权限处理</strong> 需要等到后面的章节中才可以接触到，因为咱们想要处理 <strong>用户权限</strong> 还需要先去处理很多的业务场景，所以在这里就先只处理 <strong>动态<code>menu</code>菜单</strong> 这一个概念</p><p>那么 <strong>动态<code>menu</code>菜单</strong> 指的到底是什么意思呢？</p><p>所谓 <strong>动态<code>menu</code>菜单</strong> 指的是：</p><blockquote><p>根据路由表的配置，自动生成对应的 <code>menu</code> 菜单。</p><p>当路由表发生变化时，<code>menu</code> 菜单自动发生变化</p></blockquote><p>那么明确了 <strong>动态<code>menu</code>菜单</strong> 的含义之后，接下来就需要来明确以下 <strong>动态<code>menu</code>菜单</strong> 的实现方案：</p><ol><li>定义 <strong>路由表</strong> 对应 <strong><code>menu</code> 菜单规则</strong></li><li>根据规则制定 <strong>路由表</strong></li><li>根据规则，依据 <strong>路由表</strong> ，生成 <strong><code>menu</code> 菜单</strong></li></ol><p>那么根据实现方案可以发现，实现 <strong>动态<code>menu</code>菜单</strong> 最核心的关键点其实就在步骤一，也就是</p><blockquote><p>定义 <strong>路由表</strong> 对应 <strong><code>menu</code> 菜单规则</strong></p></blockquote><p>那么看一下，这个规则如何制定：</p><ol><li>对于单个路由规则而言（循环）： <ol><li>如果<code>meta &amp;&amp; meta.title &amp;&amp; meta.icon</code> ：则显示在 <code>menu</code> 菜单中，其中 <code>title</code> 为显示的内容，<code>icon</code> 为显示的图标 <ol><li>如果存在 <code>children</code> ：则以 <code>el-sub-menu（子菜单）</code> 展示</li><li>否则：则以 <code>el-menu-item（菜单项）</code> 展示</li></ol></li><li>否则：不显示在 <code>menu</code> 菜单中</li></ol></li></ol><p>那么明确好了对应的规则之后，接下来看一下如何进行实现</p><h3 id="生成项目页面组件" tabindex="-1"><a class="header-anchor" href="#生成项目页面组件" aria-hidden="true">#</a> 生成项目页面组件</h3><p>想要完成动态的 <code>menu</code>，那么我们需要按照以下的步骤来去实现：</p><ol><li>创建页面组件</li><li>生成路由表</li><li>解析路由表</li><li>生成 <code>menu</code> 菜单</li></ol><p>那么明确好了步骤之后，就先来实现第一步</p><p><strong>创建页面组件</strong></p><p>在 <code>views</code> 文件夹下，创建如下页面：</p><ol><li>创建文章：<code>article-create</code></li><li>文章详情：<code>article-detail</code></li><li>文章排名：<code>article-ranking</code></li><li>错误页面：<code>error-page</code><ol><li><code>404</code></li><li><code>401</code></li></ol></li><li>导入：<code>import</code></li><li>权限列表：<code>permission-list</code></li><li>个人中心：<code>profile</code></li><li>角色列表：<code>role-list</code></li><li>用户信息：<code>user-info</code></li><li>用户管理：<code>user-manage</code></li></ol><h3 id="创建结构路由表" tabindex="-1"><a class="header-anchor" href="#创建结构路由表" aria-hidden="true">#</a> 创建结构路由表</h3><p>想要实现结构路由表，那么我们需要先知道最终我们要实现的结构是什么样子的</p><p><img src="/myBlog-vp/assets/mn1.dfcb236b.png" alt="图片"></p><p>这是最终要实现的 <code>menu</code> 截图</p><p>根据此截图，可以知道两点内容：</p><ol><li>之前创建的页面<strong>并没有全部</strong>进行展示 <ol><li>根据该方案 <img src="/myBlog-vp/assets/fa1.2d7cab6d.png" alt="图片"></li><li>即不显示页面 <strong>不满足</strong> 该条件 <code>meta &amp;&amp; meta.title &amp;&amp; meta.icon</code></li></ol></li><li>menu` 菜单将具备父子级的结构 <ol><li>按照此结构规划数据，则数据应为</li></ol></li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;个人中心&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;用户&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;员工管理&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;角色列表&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;权限列表&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;文章&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;文章排名&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;创建文章&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>又因为将来我们需要进行 <strong>用户权限处理</strong> ，所以此时我们需要先对路由表进行一个划分：</p><ol><li><strong>私有路由表 <code>privateRoutes</code></strong> ：权限路由</li><li><strong>公有路由表 <code>publicRoutes</code></strong>：无权限路由</li></ol><p>根据以上理论，生成以下路由表结构：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">&#39;@/layout&#39;</span>

<span class="token comment">// 私有路由表</span>
<span class="token keyword">const</span> privateRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">&#39;/user/manage&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;user&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/user/manege&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;userManage&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/user-manage/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;userManage&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;memo&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/user/role&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;userRole&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/role-list/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;roleList&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;user&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/user/permission&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;userPermission&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/permission-list/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;userPermission&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;finished&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/user/info/:id&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/user-info/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;userInfo&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/user/import&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;userImport&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/import/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;excelImport&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/article&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;article&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;document&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/article/ranking&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;articleRanking&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/article-ranking/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;article-ranking&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;document&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/article/create&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;articleCreate&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/article-create/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;articleCreate&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;documentAdd&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/article/editor/:id&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/article-create/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;articleEditor&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/article/:id&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/article-detail/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;articleDetail&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">// 公开路由表</span>
<span class="token keyword">const</span> publicRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;login&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/login/index.vue&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;layout&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">component</span><span class="token operator">:</span> Layout<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/profile&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;profile&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/profile/index.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;profile&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;user&#39;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/404&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;404&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/error-page/404.vue&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/401&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;401&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;@/views/error-page/401.vue&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>publicRoutes<span class="token punctuation">,</span> <span class="token operator">...</span>privateRoutes<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br></div></div><p>最后不要忘记在 <code>layout/appMain</code> 下设置路由出口</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-main<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="解析路由表-获取结构化数据" tabindex="-1"><a class="header-anchor" href="#解析路由表-获取结构化数据" aria-hidden="true">#</a> 解析路由表, 获取结构化数据</h3><p>获取到之前明确的结构化数据：</p><p>想要获取路由表数据，那么有两种方式：</p><ol><li><a href="https://next.router.vuejs.org/zh/api/#routes" target="_blank" rel="noopener noreferrer">router.options.routes<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：初始路由列表（<a href="https://next.router.vuejs.org/zh/api/#addroute" target="_blank" rel="noopener noreferrer">新增的路由<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 无法获取到）</li><li><a href="https://next.router.vuejs.org/zh/api/#getroutes" target="_blank" rel="noopener noreferrer">router.getRoutes()<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：获取所有 <a href="https://next.router.vuejs.org/zh/api/#routerecord" target="_blank" rel="noopener noreferrer">路由记录<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 的完整列表</li></ol><p>所以，我们此时使用 <a href="https://next.router.vuejs.org/zh/api/#getroutes" target="_blank" rel="noopener noreferrer">router.getRoutes()<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>在 <code>layout/components/Sidebar/SidebarMenu</code> 下写入以下代码：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">getRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>得到返回的数据： <img src="/myBlog-vp/assets/ooii1.5e5eef6d.png" alt="图片"></p><p>从返回的数据来看，它与我们想要的数据结构相去甚远。</p><p>出现这个问题的原因，是因为它返回的是一个 <strong>完整的路由表</strong></p><p>这个路由表距离我们想要的存在两个问题：</p><ol><li>存在重复的路由数据</li><li>不满足该条件 <code>meta &amp;&amp; meta.title &amp;&amp; meta.icon</code> 的数据不应该存在</li></ol><p>那么接下来我们就应该来处理这两个问题</p><p>创建 <code>utils/route</code> 文件，创建两个方法分别处理对应的两个问题：</p><ol><li><code>filterRouters</code></li><li><code>generateMenus</code></li></ol><p>写入以下代码：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span>

<span class="token doc-comment comment">/**
 * 返回所有子路由
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">getChildrenRoutes</span> <span class="token operator">=</span> <span class="token parameter">routes</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">route</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> route<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>route<span class="token punctuation">.</span>children<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * 处理脱离层级的路由：某个一级路由为其他子路由，则剔除该一级路由，保留路由层级
 * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">}</span></span> <span class="token parameter">routes</span> router.getRoutes()
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">filterRouters</span> <span class="token operator">=</span> <span class="token parameter">routes</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> childrenRoutes <span class="token operator">=</span> <span class="token function">getChildrenRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
  <span class="token keyword">return</span> routes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">route</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">!</span>childrenRoutes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">childrenRoute</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> childrenRoute<span class="token punctuation">.</span>path <span class="token operator">===</span> route<span class="token punctuation">.</span>path
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * 判断数据是否为空值
 */</span>
<span class="token keyword">function</span> <span class="token function">isNull</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;{}&#39;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;[]&#39;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
 * 根据 routes 数据，返回对应 menu 规则数组
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">generateMenus</span><span class="token punctuation">(</span>routes<span class="token punctuation">,</span> basePath <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// 遍历路由表</span>
  routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 不存在 children &amp;&amp; 不存在 meta 直接 return</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNull</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>meta<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isNull</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token comment">// 存在 children 不存在 meta，进入迭代</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNull</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>meta<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isNull</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token function">generateMenus</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 合并 path 作为跳转路径</span>
    <span class="token keyword">const</span> routePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>basePath<span class="token punctuation">,</span> item<span class="token punctuation">.</span>path<span class="token punctuation">)</span>
    <span class="token comment">// 路由分离之后，存在同名父路由的情况，需要单独处理</span>
    <span class="token keyword">let</span> route <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>path <span class="token operator">===</span> routePath<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>route<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      route <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>item<span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> routePath<span class="token punctuation">,</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// icon 与 title 必须全部存在</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>icon <span class="token operator">&amp;&amp;</span> route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// meta 存在生成 route 对象，放入 arr</span>
        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 存在 children 进入迭代到children</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      route<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token function">generateMenus</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">,</span> route<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><p>在 <code>SidebarMenu</code> 中调用该方法</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> filterRouters<span class="token punctuation">,</span> generateMenus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/route&#39;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> filterRoutes <span class="token operator">=</span> <span class="token function">filterRouters</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">getRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token function">generateMenus</span><span class="token punctuation">(</span>filterRoutes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>routes<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>会得到该数据结构</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/profile&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;profile&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;meta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;profile&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span><span class="token string">&quot;el-icon-user&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;redirect&quot;</span><span class="token operator">:</span><span class="token string">&quot;/user/manage&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;meta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span><span class="token string">&quot;personnel&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;default&quot;</span><span class="token operator">:</span><span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/user/manage&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;userManage&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;meta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;userManage&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span><span class="token string">&quot;personnel-manage&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>

                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/user/role&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;userRole&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;meta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;roleList&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span><span class="token string">&quot;role&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>

                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/user/permission&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;userPermission&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;meta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;permissionList&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span><span class="token string">&quot;permission&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>

                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/article&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;redirect&quot;</span><span class="token operator">:</span><span class="token string">&quot;/article/ranking&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;meta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span><span class="token string">&quot;article&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;default&quot;</span><span class="token operator">:</span><span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/article/ranking&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;articleRanking&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;meta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;articleRanking&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span><span class="token string">&quot;article-ranking&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>

                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;path&quot;</span><span class="token operator">:</span><span class="token string">&quot;/article/create&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;articleCreate&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;meta&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span><span class="token string">&quot;articleCreate&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;icon&quot;</span><span class="token operator">:</span><span class="token string">&quot;article-create&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>

                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><h3 id="生成动态-menu-菜单" tabindex="-1"><a class="header-anchor" href="#生成动态-menu-菜单" aria-hidden="true">#</a> 生成动态 menu 菜单</h3><p>computed 计算属性分一下对应的菜单 : 有 children 的菜单, 没有 children 的菜单</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> filterRouters<span class="token punctuation">,</span> generateMenus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/route&#39;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fRoutes <span class="token operator">=</span> <span class="token function">filterRouters</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">getRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token function">generateMenus</span><span class="token punctuation">(</span>fRoutes<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 没有子菜单的路由</span>
<span class="token keyword">const</span> noChildrenRoutes <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> routes<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&#39;[]&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 有子菜单的路由</span>
<span class="token keyword">const</span> hasChildrenRoutes <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> routes<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&#39;[]&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>模板遍历对应类型的菜单</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu</span>
    <span class="token attr-name">:uniqueOpened</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">default-active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">background-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#545c64<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#fff<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">active-text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#ffd04b<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--没有子菜单的路由--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in noChildrenRoutes<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.path<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span> <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.path<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.meta.icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ item.meta.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--有子菜单的路由--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in hasChildrenRoutes<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.path<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-sub-menu</span> <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.path<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#title</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.meta.icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ item.meta.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu-item</span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child in item.children<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child.path<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child.path<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>child.meta.icon<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ child.meta.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-sub-menu</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="修复最后残余问题" tabindex="-1"><a class="header-anchor" href="#修复最后残余问题" aria-hidden="true">#</a> 修复最后残余问题</h3><p>目前 <code>menu</code> 菜单存在三个问题</p><ol><li>样式问题</li><li>路由跳转问题</li><li>默认激活项</li></ol><p><strong>样式问题：</strong></p><p>首先处理样式，因为后面我们需要处理 <strong>主题替换</strong> ，所以此处我们不能把样式写死</p><p>在 <code>store/getters</code> 中创建一个新的 <strong>快捷访问</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> variables <span class="token keyword">from</span> <span class="token string">&#39;@/styles/variables.module.scss&#39;</span>
<span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token function-variable function">cssVar</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> variables
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> getters
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在 <code>SidebarMenu</code> 中写入如下样式 <img src="/myBlog-vp/assets/vsvs1.1e0a3b60.png" alt="图片"></p><p><strong>路由跳转问题：</strong></p><p><img src="/myBlog-vp/assets/lytz1.9d7d61bd.png" alt="图片"></p><p><strong>默认激活项：</strong></p><p>根据当前 <code>url</code> 进行判断即可</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu</span>
    <span class="token attr-name">:uniqueOpened</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:default-active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeMenu<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:background-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$store.getters.cssVar.menuBg<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$store.getters.cssVar.menuText<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:active-text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$store.getters.cssVar.menuActiveText<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">router</span>
  <span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter<span class="token punctuation">,</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token operator">...</span><span class="token punctuation">.</span>

<span class="token comment">// 当前路由激活项</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> activeMenu <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> route<span class="token punctuation">.</span>path
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>至此整个 <strong>动态<code>menu</code>完成</strong></p><h2 id="动画逻辑-左侧菜单伸缩功能实现" tabindex="-1"><a class="header-anchor" href="#动画逻辑-左侧菜单伸缩功能实现" aria-hidden="true">#</a> 动画逻辑，左侧菜单伸缩功能实现</h2><p>样式的改变总是由数据进行驱动，所以首先去创建对应的数据</p><p>创建 <code>store/app</code> 模块，写入如下代码</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">sidebarOpened</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">triggerSidebarOpened</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>sidebarOpened <span class="token operator">=</span> <span class="token operator">!</span>state<span class="token punctuation">.</span>sidebarOpened
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>在 <code>store/index</code> 中进行导入</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">import</span> app <span class="token keyword">from</span> <span class="token string">&#39;./modules/app&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  getters<span class="token punctuation">,</span>
  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    app
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在 <code>store/getters</code> 中创建快捷访问</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function-variable function">sidebarOpened</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>app<span class="token punctuation">.</span>sidebarOpened
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>创建 <code>components/hamburger</code> 组件，用来控制数据</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hamburger-container<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hamburger<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg-icon</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vuex&#39;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">toggleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">&#39;app/triggerSidebarOpened&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> icon <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>sidebarOpened <span class="token operator">?</span> <span class="token string">&#39;hamburger-opened&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;hamburger-closed&#39;</span>
<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.hamburger-container</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span>
  <span class="token selector">.hamburger</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>在 <code>navbar</code> 中使用该组件</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hamburger</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hamburger-container<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Hamburger <span class="token keyword">from</span> <span class="token string">&#39;@/components/Hamburger&#39;</span>
<span class="token operator">...</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.navbar</span> <span class="token punctuation">{</span>
  <span class="token selector">...

  .hamburger-container</span> <span class="token punctuation">{</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 46px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    // hover 动画
    <span class="token property">transition</span><span class="token punctuation">:</span> background 0.5s<span class="token punctuation">;</span>

    <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

 ...
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>在 <code>SidebarMenu</code> 中，控制 <code>el-menu</code> 的 <a href="https://element-plus.org/#/zh-CN/component/menu" target="_blank" rel="noopener noreferrer">collapse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 属性</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>&lt;el-menu
    :collapse=&quot;!$store.getters.sidebarOpened&quot;
    ...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在 <code>layout/index</code> 中指定 <strong>整个侧边栏的宽度和缩放动画</strong></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-wrapper<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[$store.getters.sidebarOpened ? <span class="token punctuation">&#39;</span>openSidebar<span class="token punctuation">&#39;</span> : <span class="token punctuation">&#39;</span>hideSidebar<span class="token punctuation">&#39;</span>]<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
  ...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在 <code>layout/index</code> 中 处理 <code>navbar</code> 的宽度</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">...

.fixed-header</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 9<span class="token punctuation">;</span>
  <span class="token selector">width: calc(100% - #</span><span class="token punctuation">{</span>$sideBarWidth<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> width 0.28s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hideSidebar .fixed-header</span> <span class="token punctuation">{</span>
  <span class="token selector">width: calc(100% - #</span><span class="token punctuation">{</span>$hideSideBarWidth<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>在 <code>styles/variables.scss</code> 中指定 <code>hideSideBarWidth</code></p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token property"><span class="token variable">$hideSideBarWidth</span></span><span class="token punctuation">:</span> 54px<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="sidebarheader-处理" tabindex="-1"><a class="header-anchor" href="#sidebarheader-处理" aria-hidden="true">#</a> SidebarHeader 处理</h2><p>layout/components/Sidebar/index.vue</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;div class=&quot;&quot;&gt;
    &lt;div class=&quot;title&quot;&gt;
      &lt;router-link to=&quot;/profile&quot;&gt;
        &lt;h3&gt;Vue3-admin&lt;/h3&gt;
      &lt;/router-link&gt;
    &lt;/div&gt;
    &lt;el-scrollbar&gt;
      &lt;sidebar-menu&gt;&lt;/sidebar-menu&gt;
    &lt;/el-scrollbar&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script setup&gt;
import SidebarMenu from &#39;./SidebarMenu.vue&#39;
&lt;/script&gt;
&lt;style lang=&quot;scss&quot; scoped&gt;
.title{
  padding:20px;
  text-align:center;
  color:white;
  cursor:pointer;
}
&lt;/style&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="全新-vue-能力-组件状态驱动的动态-css-值" tabindex="-1"><a class="header-anchor" href="#全新-vue-能力-组件状态驱动的动态-css-值" aria-hidden="true">#</a> 全新 vue 能力：组件状态驱动的动态 CSS 值</h2><p>在 <a href="https://blog.vuejs.org/posts/vue-3.2.html" target="_blank" rel="noopener noreferrer">vue 3.2<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 最新更新中，除了之前的 <strong>响应式变化</strong> 之外，还有另外一个很重要的更新，那就是 <strong>组件状态驱动的动态 <code>CSS</code> 值</strong> ，对应的文档也已经公布，大家可以 <a href="https://v3.vuejs.org/api/sfc-style.html#state-driven-dynamic-css" target="_blank" rel="noopener noreferrer">点击这里<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 查看</p><p>那么下面就使用下最新的特性，来为 <code>logo-container</code> 指定下高度：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
 ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo-container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 ...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token operator">...</span>
<span class="token keyword">const</span> logoHeight <span class="token operator">=</span> <span class="token number">44</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.logo-container</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">v-bind</span><span class="token punctuation">(</span>logoHeight<span class="token punctuation">)</span> + <span class="token string">&#39;px&#39;</span><span class="token punctuation">;</span>
...
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="动态面包屑方案分析" tabindex="-1"><a class="header-anchor" href="#动态面包屑方案分析" aria-hidden="true">#</a> 动态面包屑方案分析</h2><p>到目前位置，最后一个功能就是 <strong>面包屑导航</strong>，分为：</p><ol><li>静态面包屑</li><li>动态面包屑</li></ol><p><strong>静态面包屑：</strong></p><p>指的是：<strong>在每个页面中写死对应的面包屑菜单</strong>，缺点也很明显：</p><ol><li>每个页面都得写一遍</li><li>页面路径结构变化了，得手动更改</li></ol><p>简单来说就是 <strong>不好维护，不好扩展</strong> 。</p><p><strong>动态面包屑：</strong></p><p><strong>根据当前的 <code>url</code> 自动生成面包屑导航菜单</strong></p><p>无论之后路径发生了什么变化，<strong>动态面包屑</strong> 都会正确的进行计算</p><p>那么在后面的实现过程中，将会分成三大步来实现</p><ol><li>创建、渲染基本的面包屑组件</li><li>计算面包屑结构数据</li><li>根据数据渲染动态面包屑内容</li></ol><h3 id="渲染基本的面包屑组件" tabindex="-1"><a class="header-anchor" href="#渲染基本的面包屑组件" aria-hidden="true">#</a> 渲染基本的面包屑组件</h3><p>完成第一步，先去创建并渲染出基本的 <a href="https://element-plus.org/#/zh-CN/component/breadcrumb" target="_blank" rel="noopener noreferrer">面包屑<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 组件</p><p>创建 <code>components/Breadcrumb/index</code>，并写入如下代码：</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-breadcrumb</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>breadcrumb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-breadcrumb-item</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ path: <span class="token punctuation">&#39;</span>/<span class="token punctuation">&#39;</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-breadcrumb-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-breadcrumb-item</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>活动管理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-breadcrumb-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-breadcrumb-item</span><span class="token punctuation">&gt;</span></span>活动列表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-breadcrumb-item</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 面包屑的最后一项 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-breadcrumb-item</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no-redirect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>活动详情<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-breadcrumb-item</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-breadcrumb</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.breadcrumb</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>

  <span class="token selector">::v-deep .no-redirect</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #97a8be<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>在 <code>layout/components/Navbar</code> 组件下导入</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navbar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hamburger</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hamburger-container<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>breadcrumb</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>breadcrumb-container<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.navbar</span> <span class="token punctuation">{</span>
 <span class="token selector">...

  .breadcrumb-container</span> <span class="token punctuation">{</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
   ...
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="动态计算面包屑结构数据" tabindex="-1"><a class="header-anchor" href="#动态计算面包屑结构数据" aria-hidden="true">#</a> 动态计算面包屑结构数据</h3><p>现在我们是完成了一个静态的 面包屑，接下来咱们就需要依托这个静态的菜单来完成动态的。</p><p>对于现在的静态面包屑来说，他分成了两个组件：</p><ol><li><code>el-breadcrumb</code>：包裹性质的容器</li><li><code>el-breadcrumb-item</code>：每个单独项</li></ol><p>如果我们想要完成动态的，那么就需要 **依据动态数据，渲染 <code>el-breadcrumb-item</code> **</p><p>所以说接下来我们需要做的事情就很简单了</p><ol><li>动态数据</li><li>渲染 <code>el-breadcrumb-item</code></li></ol><p>那么这一小节咱们先来看 <strong>动态数据如何制作</strong></p><p>我们希望可以制作出一个 <strong>数组</strong>，数组中每个 <code>item</code> 都表示一个 <strong>路由信息</strong>：</p><p>创建一个方法，用来生成数组数据，在这里我们要使用到 <a href="https://next.router.vuejs.org/zh/api/#matched" target="_blank" rel="noopener noreferrer">route.match<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 属性来：<strong>获取与给定路由地址匹配的<a href="https://next.router.vuejs.org/zh/api/#routerecord" target="_blank" rel="noopener noreferrer">标准化的路由记录<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>数组</strong></p><p><img src="/myBlog-vp/assets/match1.4e0069d5.png" alt="图片"></p><h3 id="vue3-动画处理" tabindex="-1"><a class="header-anchor" href="#vue3-动画处理" aria-hidden="true">#</a> vue3 动画处理</h3><p>vue3对 <a href="https://v3.cn.vuejs.org/guide/transitions-overview.html#%E5%9F%BA%E4%BA%8E-class-%E7%9A%84%E5%8A%A8%E7%94%BB%E5%92%8C%E8%BF%87%E6%B8%A1" target="_blank" rel="noopener noreferrer">动画<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 进行了一些修改（<a href="https://v3.cn.vuejs.org/guide/migration/transition.html#%E6%A6%82%E8%A7%88" target="_blank" rel="noopener noreferrer">vue 动画迁移文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>）</p><p>主要的修改其实只有两个：</p><ol><li>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code></li><li>过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code></li></ol><p>那么依据修改之后的动画，我们来为面包屑增加一些动画样式：</p><ol><li>在 <code>Breadcrumb/index</code> 中增加 <code>transition-group</code></li></ol><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-breadcrumb</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>breadcrumb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition-group</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>breadcrumb<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         ...
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition-group</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-breadcrumb</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li>新建 <code>styles/transition</code> 样式文件</li></ol><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token selector">.breadcrumb-enter-active,
.breadcrumb-leave-active</span><span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.breadcrumb-enter-from </span><span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>20px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.breadcrumb-leave-to </span><span class="token punctuation">{</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-20px<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.breadcrumb-leave-active </span><span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="3"><li>在 <code>styles/index</code> 中导入</li></ol><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code><span class="token keyword">@import</span> <span class="token string">&#39;./transition.scss&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>围绕着<code>layout</code> 为核心，主要实现了三个大的业务方案：</p><ol><li>用户退出方案</li><li>动态侧边栏方案</li><li>动态面包屑方案</li></ol><p>除了这三块大的方案之后，还有一些小的功能，比如：</p><ol><li>退出的通用逻辑封装</li><li>伸缩侧边栏动画</li><li><code>vue3</code> 动画</li><li>组件状态驱动的动态 <code>CSS</code> 值等等</li></ol><!--]--></div><footer class="page-meta"><!----><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 932274204@qq.com">jgoriginal</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/myBlog-vp/vue-admin/denglu.html" class="" aria-label="登录"><!--[--><!--]--> 登录 <!--[--><!--]--></a></span><span class="next"><a href="/myBlog-vp/vue-admin/tongyong.html" class="" aria-label="通用功能开发"><!--[--><!--]--> 通用功能开发 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/myBlog-vp/assets/app.fcb85f29.js" defer></script>
  </body>
</html>
